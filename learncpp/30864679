<!doctype html>
<html lang="zh" class=""><head><meta charset="utf-8"/><title data-react-helmet="true">【游戏框架系列】简单的图形学（一）</title><meta name="renderer" content="webkit"/><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/><meta name="force-rendering" content="webkit"/><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/><meta name="google-site-verification" content="FTeR0c8arOPKh8c5DYh_9uu98_zJbaWw53J-Sch9MTg"/><link rel="shortcut icon" href="https://static.zhihu.com/static/favicon.ico" type="image/x-icon"/><link href="//static.zhihu.com/hemingway/app.36335a6d5e421112e55e12ecfbff7ac5.css" rel="stylesheet"/><style></style></head><body><div id="react-root"><div><div class="Layout av-cardBackground" data-zop-userToken="{&quot;userToken&quot;:&quot;&quot;}"><div class="Layout-navbarHolder"><header class="Navbar"><div class="Navbar-logo-wrapper"><a class="Navbar-logo icon-ic_zhihu_logo" href="//www.zhihu.com" target="_blank" rel="noopener noreferrer" aria-label="知乎首页"></a></div><div class="Navbar-postTitle Navbar-title"><a href="https://zhuanlan.zhihu.com/learncpp"><img class="Navbar-columnIcon" alt="学习C++" src="https://pic2.zhimg.com/v2-bf63794c542fc73b11e17014b7e0d01d_m.jpg"/></a><div class="Navbar-postTitleName"><span class="Navbar-postTitleMeta">首发于</span><a class="Navbar-postTitleMain" href="https://zhuanlan.zhihu.com/learncpp">学习C++</a></div></div><div class="Navbar-functionality"><a class="Navbar-write"><i class="icon icon-ic_nav_new"></i>写文章</a><button class="Button Navbar-loginButon Button--blue" type="button">登录</button></div></header></div><div></div><div class="Layout-main av-card av-paddingBottom av-bodyFont Layout-titleImage--normal"><div class="PostIndex-header av-paddingTop av-card" data-zop="{&quot;authorName&quot;:&quot;陈安&quot;,&quot;itemId&quot;:&quot;30864679&quot;,&quot;title&quot;:&quot;【游戏框架系列】简单的图形学（一）&quot;,&quot;type&quot;:&quot;article&quot;}"><div class="TitleImage"><img alt="【游戏框架系列】简单的图形学（一）" src="https://pic3.zhimg.com/v2-906c83976041e220e95ca93cbd8bf476_r.png" class="TitleImage-imagePure"/></div><h1 class="PostIndex-title av-paddingSide av-titleFont">【游戏框架系列】简单的图形学（一）</h1><div class="PostIndex-author"><a href="https://www.zhihu.com/people/bajdcc" target="_blank" rel="noopener noreferrer"><img class="Avatar-hemingway PostIndex-authorAvatar Avatar--xs" alt="陈安" src="https://pic4.zhimg.com/50/v2-cd6d61ad9ef94c41b9e77f8e0f727893_xs.jpg" srcset="https://pic4.zhimg.com/50/v2-cd6d61ad9ef94c41b9e77f8e0f727893_l.jpg 2x"/></a><a href="https://www.zhihu.com/people/bajdcc" target="_blank" class="PostIndex-authorName">陈安</a><span class="Bull"></span><div class="HoverTitle" data-hover-title="Wed, Nov 8, 2017 9:54 PM"><time datetime="Wed Nov 08 2017 21:54:57 GMT+0800 (CST)">a month ago</time></div></div></div><div class="RichText PostIndex-content av-paddingSide av-card"><p>看到叶大的文章<a href="http://link.zhihu.com/?target=http%3A//www.cnblogs.com/miloyip/archive/2010/03/29/1698953.html" class=" wrap external" target="_blank" rel="nofollow noreferrer">用JavaScript玩转计算机图形学(一)光线追踪入门 - Milo Yip - 博客园<i class="icon-external"></i></a>，里面有几个小例子，所以把这些效果用C++再实现一遍。</p><p><a href="http://link.zhihu.com/?target=https%3A//github.com/bajdcc/GameFramework" class=" wrap external" target="_blank" rel="nofollow noreferrer">bajdcc/GameFramework<i class="icon-external"></i></a>，这一系列停更好久了，只是没想到比较有趣的点子，拿它来练习再好不过，原因有：Direct2D渲染、支持lua脚本、C++编写。由于是光线追踪，所以实际上可以说不依赖任何库，只要有一个CPU就能完成计算。</p><p>目前只做了两个效果，具体的讲述移步博客，我不再赘述。</p><p>代码：</p><ul><li><a href="http://link.zhihu.com/?target=https%3A//github.com/bajdcc/GameFramework/blob/master/CCGameFramework/base/pe2d/RenderSphere.cpp" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">https://</span><span class="visible">github.com/bajdcc/GameF</span><span class="invisible">ramework/blob/master/CCGameFramework/base/pe2d/RenderSphere.cpp</span><span class="ellipsis"></span><i class="icon-external"></i></a>（光线追踪）</li><li><a href="http://link.zhihu.com/?target=https%3A//github.com/bajdcc/GameFramework/blob/master/CCGameFramework/base/pe2d/PhysicsEngine2D.cpp%23L73" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">https://</span><span class="visible">github.com/bajdcc/GameF</span><span class="invisible">ramework/blob/master/CCGameFramework/base/pe2d/PhysicsEngine2D.cpp#L73</span><span class="ellipsis"></span><i class="icon-external"></i></a>（色彩图）</li></ul><h2>色彩图</h2><figure><noscript><img src="https://pic4.zhimg.com/v2-e881ddc4dd33a86c452dc8521b4ad2e3_b.jpg" data-rawwidth="1031" data-rawheight="628" class="origin_image zh-lightbox-thumb" width="1031" data-original="https://pic4.zhimg.com/v2-e881ddc4dd33a86c452dc8521b4ad2e3_r.jpg"></noscript><img src="data:image/svg+xml;utf8,&lt;svg%20xmlns='http://www.w3.org/2000/svg'%20width='1031'%20height='628'&gt;&lt;/svg&gt;" data-rawwidth="1031" data-rawheight="628" class="origin_image zh-lightbox-thumb lazy" width="1031" data-original="https://pic4.zhimg.com/v2-e881ddc4dd33a86c452dc8521b4ad2e3_r.jpg" data-actualsrc="https://pic4.zhimg.com/v2-e881ddc4dd33a86c452dc8521b4ad2e3_b.jpg"><figcaption>色彩图</figcaption></figure><p>这只是一个基本的例子，讲述如何通过像素操作来改变色彩。</p><p>我们一张图就如同一个二阶矩阵，每个颜色是一个int，就这么简单。</p><p>具体实现的过程：</p><ol><li>窗口收到WM_PAINT消息，开始启用Direct2D绘制</li><li>我们的窗口里面是树状关系的窗口/控件组，所以递归执行绘制操作</li><li>展示控件执行绘制操作</li><li>创建一个颜色数组，修改之</li><li>根据数组创建一个位图，将它保存供重用</li><li>利用Direct2D的渲染操作将该位图渲染</li></ol><h2>简单的光线追踪</h2><figure><noscript><img src="https://pic3.zhimg.com/v2-906c83976041e220e95ca93cbd8bf476_b.jpg" data-rawwidth="1031" data-rawheight="628" class="origin_image zh-lightbox-thumb" width="1031" data-original="https://pic3.zhimg.com/v2-906c83976041e220e95ca93cbd8bf476_r.jpg"></noscript><img src="data:image/svg+xml;utf8,&lt;svg%20xmlns='http://www.w3.org/2000/svg'%20width='1031'%20height='628'&gt;&lt;/svg&gt;" data-rawwidth="1031" data-rawheight="628" class="origin_image zh-lightbox-thumb lazy" width="1031" data-original="https://pic3.zhimg.com/v2-906c83976041e220e95ca93cbd8bf476_r.jpg" data-actualsrc="https://pic3.zhimg.com/v2-906c83976041e220e95ca93cbd8bf476_b.jpg"><figcaption>光线追踪(左) 以及 法向量图(右)</figcaption></figure><p>左边的光线追踪我一开始也没有搞明白，等到实现之后才明白。</p><p>实现原理很简单：</p><ol><li>一个眼睛，一个球，没有光</li><li>最终的结果要投影到一块屏幕上，屏幕和眼睛是有一个距离的，就像拍照时手要比个相框一样</li><li>眼睛、屏幕、球，万事俱备（详见<a href="http://link.zhihu.com/?target=http%3A//www.cnblogs.com/miloyip/archive/2010/03/29/1698953.html" class=" wrap external" target="_blank" rel="nofollow noreferrer">用JavaScript玩转计算机图形学(一)光线追踪入门 - Milo Yip - 博客园<i class="icon-external"></i></a> 第一张图）</li></ol><p>最主要操作：</p><ol><li>屏幕上给每个像素标记一个点</li><li>眼睛与那些点形成一个射线（光线）</li><li>射线无限延长（追踪），你把它看成激光</li><li>激光有可能就照在了球上，也有可能不在球上</li><li>对于照在球上的激光，我只要算一下<b>激光出发点（眼睛）到激光结束点（激光与球交点）的距离</b>即可。</li><li>将两者距离（正数）最终映射到0-255，即RGB，根据RGB值确定像素颜色</li><li>如果激光没有打中球，对应像素表现为黑色</li></ol><p>理一下映射关系：<b>3D空间--&gt;2D屏幕，距离--&gt;像素颜色</b>。</p><p>右边是一个法向量图，不同的是：并非由距离确定像素颜色，而是由<b>该点法向量</b>确定颜色。</p><p>激光打中球时，我们计算出交点的坐标，同时也计算出激光到该点的直线，其实就是法向量。</p><p>法向量方程有四个参数，但是这里场景很简单——球的法向量（单位向量）<b>经过球心</b>，所以其实只有三个参数，我们将三个参数（-1~1）映射到RGB。</p><p><br></p><p>后面要完成的：</p><ol><li><a href="http://link.zhihu.com/?target=http%3A//www.cnblogs.com/miloyip/archive/2010/04/02/1702768.html" class=" wrap external" target="_blank" rel="nofollow noreferrer">用JavaScript玩转计算机图形学(二)基本光源 - Milo Yip - 博客园<i class="icon-external"></i></a></li><li><a href="https://zhuanlan.zhihu.com/p/30745861" class="internal">用 C 语言画光（一）：基础</a></li><li><a href="https://zhuanlan.zhihu.com/p/30748318" class="internal">用 C 语言画光（二）：构造实体几何</a></li></ol><p></p></div><div class="PostIndex-footer"><div class="PostIndex-topics TopicItem-wrapper"><a class="TopicItem u-ellipsis PostIndex-topicItem" href="https://www.zhihu.com/topic/19613730">计算机图形学</a><a class="TopicItem u-ellipsis PostIndex-topicItem" href="https://www.zhihu.com/topic/19601705">C / C++</a><a class="TopicItem u-ellipsis PostIndex-topicItem" href="https://www.zhihu.com/topic/20065767">光线跟踪</a></div><div class="PostIndex-reviewers"></div><div class="PostIndex-vote"><button class="Button PostIndex-voteButton Button--green" aria-label="赞" type="button"><i class="icon icon-ic_column_like"></i>29</button><div class="PostIndex-voters"><div class="HoverTitle HoverTitle--slim" data-hover-title="Inspiration"><a href="https://www.zhihu.com/people/feng-ming-xiao" class="PostIndex-voter" target="_blank"><img class="Avatar-hemingway Avatar--is" alt="Inspiration" src="https://pic1.zhimg.com/da8e974dc_is.jpg" srcset="https://pic1.zhimg.com/da8e974dc_im.jpg 2x"/></a></div><div class="HoverTitle HoverTitle--slim" data-hover-title="我想很开心"><a href="https://www.zhihu.com/people/jia-ru-meng-xiang-shi-xian" class="PostIndex-voter" target="_blank"><img class="Avatar-hemingway Avatar--is" alt="我想很开心" src="https://pic1.zhimg.com/50/v2-9659f46a58c799413677bd21de538544_is.jpg" srcset="https://pic1.zhimg.com/50/v2-9659f46a58c799413677bd21de538544_im.jpg 2x"/></a></div><div class="HoverTitle HoverTitle--slim" data-hover-title="王本亮"><a href="https://www.zhihu.com/people/xiao-mu-jin-49" class="PostIndex-voter" target="_blank"><img class="Avatar-hemingway Avatar--is" alt="王本亮" src="https://pic2.zhimg.com/50/v2-29df0d7401bc1f4c44a31cf3cfb4edf9_is.jpg" srcset="https://pic2.zhimg.com/50/v2-29df0d7401bc1f4c44a31cf3cfb4edf9_im.jpg 2x"/></a></div><div class="HoverTitle HoverTitle--slim" data-hover-title="heaven疏狂"><a href="https://www.zhihu.com/people/heavenshu-kuang" class="PostIndex-voter" target="_blank"><img class="Avatar-hemingway Avatar--is" alt="heaven疏狂" src="https://pic4.zhimg.com/50/v2-fb45e2338594c3785fad93f109098c2f_is.jpg" srcset="https://pic4.zhimg.com/50/v2-fb45e2338594c3785fad93f109098c2f_im.jpg 2x"/></a></div><div class="HoverTitle HoverTitle--slim" data-hover-title="xqm32"><a href="https://www.zhihu.com/people/xqm32" class="PostIndex-voter" target="_blank"><img class="Avatar-hemingway Avatar--is" alt="xqm32" src="https://pic1.zhimg.com/da8e974dc_is.jpg" srcset="https://pic1.zhimg.com/da8e974dc_im.jpg 2x"/></a></div><a href="/p/30864679/voters" target="_blank" rel="noopener noreferrer" title="查看全部" class="PostIndex-allVoters"><i class="icon-ic_like_more"></i></a></div></div><div class="PostIndex-control"><div class="Fav"><button class="Button Button Button--plain FavButton" type="button"><i class="icon icon-ic_collect"></i>收藏</button></div><div class="PostShare"><div class="Menu"><button class="Button Button Button--plain MenuButton MenuButton-listen-hover Button Button--plain" type="button"><i class="icon icon-ic_column_share"></i>分享</button><div class="Menu-dropdown" style="visibility:hidden;"></div></div></div><div class="Report"><button class="Button Button Button--plain ReportButton" type="button"><i class="icon icon-ic_column_report"></i>举报</button></div></div></div><div class="Contributes PostIndex-contributes av-card"><div class="BlockTitle av-marginLeft av-borderColor"><span class="BlockTitle-title">文章被以下专栏收录</span><span class="BlockTitle-line"></span></div><ul class="Contributes-list"><li style="opacity:1;max-height:300px;" class="Contributes-listItem av-borderColor av-marginLeft"><div class="ContributesItem av-paddingRight" role="link"><a class="ContributesItem-avatar" href="/learncpp"><img class="Avatar-hemingway" src="https://pic2.zhimg.com/v2-bf63794c542fc73b11e17014b7e0d01d_m.jpg" srcset="https://pic2.zhimg.com/v2-bf63794c542fc73b11e17014b7e0d01d_xl.jpg 2x"/></a><div class="ContributesItem-info"><div class="ContributesItem-nameLine"><a class="ContributesItem-name" href="https://zhuanlan.zhihu.com/learncpp">学习C++</a></div><p class="ContributesItem-intro u-ellipsis">写写C++</p></div><a class="ContributesItem-entrance" href="https://zhuanlan.zhihu.com/learncpp">进入专栏</a></div></li></ul></div><div class="PostComment"><div class="BlockTitle av-marginLeft av-borderColor PostComment-blockTitle"><span class="BlockTitle-title">还没有评论</span><span class="BlockTitle-line"></span></div><div class="CommentEditor PostComment-mainEditor"><div class="CommentEditor-input"><div class="CommentEditor-actions"><button class="Button Button--plain" type="button">取消</button><button class="Button Button--blue" disabled="" type="button">评论</button></div></div></div><div class="PostCommentList"></div></div><div class="PostIndex-recommendZone av-card"><div class="BlockTitle av-marginLeft av-borderColor"><span class="BlockTitle-title">推荐阅读</span><span class="BlockTitle-line"></span></div><div class="Spinner"></div></div></div></div></div></div><textarea id="clientConfig" hidden="">{&quot;debug&quot;:false,&quot;apiRoot&quot;:&quot;&quot;,&quot;paySDK&quot;:&quot;https:\u002F\u002Fpay.zhihu.com\u002Fapi\u002Fjs&quot;,&quot;wechatConfigAPI&quot;:&quot;\u002Fapi\u002Fwechat\u002Fjssdkconfig&quot;,&quot;name&quot;:&quot;production&quot;,&quot;instance&quot;:&quot;column&quot;,&quot;tokens&quot;:{&quot;X-XSRF-TOKEN&quot;:null,&quot;X-UDID&quot;:null,&quot;Authorization&quot;:&quot;oauth c3cef7c66a1843f8b3a9e6a1e3160e20&quot;}}</textarea><textarea id="preloadedState" hidden="">{&quot;database&quot;:{&quot;Post&quot;:{&quot;30864679&quot;:{&quot;isPending&quot;:false,&quot;contributes&quot;:[{&quot;sourceColumn&quot;:{&quot;lastUpdated&quot;:1497249764,&quot;description&quot;:&quot;玩玩有趣的东西&quot;,&quot;permission&quot;:&quot;COLUMN_PUBLIC&quot;,&quot;memberId&quot;:10760740,&quot;contributePermission&quot;:&quot;COLUMN_PUBLIC&quot;,&quot;translatedCommentPermission&quot;:&quot;all&quot;,&quot;canManage&quot;:true,&quot;intro&quot;:&quot;写写C++&quot;,&quot;urlToken&quot;:&quot;learncpp&quot;,&quot;id&quot;:25963,&quot;imagePath&quot;:&quot;v2-bf63794c542fc73b11e17014b7e0d01d.jpg&quot;,&quot;slug&quot;:&quot;learncpp&quot;,&quot;applyReason&quot;:&quot;0&quot;,&quot;name&quot;:&quot;学习C++&quot;,&quot;title&quot;:&quot;学习C++&quot;,&quot;url&quot;:&quot;https:\u002F\u002Fzhuanlan.zhihu.com\u002Flearncpp&quot;,&quot;commentPermission&quot;:&quot;COLUMN_ALL_CAN_COMMENT&quot;,&quot;canPost&quot;:true,&quot;created&quot;:1483611626,&quot;state&quot;:&quot;COLUMN_NORMAL&quot;,&quot;followers&quot;:2913,&quot;avatar&quot;:{&quot;id&quot;:&quot;v2-bf63794c542fc73b11e17014b7e0d01d&quot;,&quot;template&quot;:&quot;https:\u002F\u002Fpic2.zhimg.com\u002F{id}_{size}.jpg&quot;},&quot;activateAuthorRequested&quot;:false,&quot;following&quot;:false,&quot;imageUrl&quot;:&quot;https:\u002F\u002Fpic2.zhimg.com\u002Fv2-bf63794c542fc73b11e17014b7e0d01d_l.jpg&quot;,&quot;articlesCount&quot;:53},&quot;state&quot;:&quot;accepted&quot;,&quot;targetPost&quot;:{&quot;titleImage&quot;:&quot;https:\u002F\u002Fpic3.zhimg.com\u002Fv2-906c83976041e220e95ca93cbd8bf476_r.png&quot;,&quot;lastUpdated&quot;:1510149663,&quot;imagePath&quot;:&quot;v2-906c83976041e220e95ca93cbd8bf476.png&quot;,&quot;permission&quot;:&quot;ARTICLE_PUBLIC&quot;,&quot;topics&quot;:[21222,17215,174374],&quot;summary&quot;:&quot;看到叶大的文章\u003Ca href=\&quot;http:\u002F\u002Fwww.cnblogs.com\u002Fmiloyip\u002Farchive\u002F2010\u002F03\u002F29\u002F1698953.html\&quot;\u003E用JavaScript玩转计算机图形学(一)光线追踪入门 - Milo Yip - 博客园\u003C\u002Fa\u003E，里面有几个小例子，所以把这些效果用C++再实现一遍。\u003Ca href=\&quot;https:\u002F\u002Fgithub.com\u002Fbajdcc\u002FGameFramework\&quot;\u003Ebajdcc\u002FGameFramework\u003C\u002Fa\u003E，这一系列停更好久了，只是没想到比较有趣的点子，拿它来练习再好不过，原因有：Direct2D渲染…&quot;,&quot;copyPermission&quot;:&quot;ARTICLE_COPYABLE&quot;,&quot;translatedCommentPermission&quot;:&quot;all&quot;,&quot;likes&quot;:0,&quot;origAuthorId&quot;:0,&quot;publishedTime&quot;:&quot;2017-11-08T21:54:57+08:00&quot;,&quot;sourceUrl&quot;:&quot;&quot;,&quot;urlToken&quot;:30864679,&quot;id&quot;:4534327,&quot;withContent&quot;:false,&quot;slug&quot;:30864679,&quot;bigTitleImage&quot;:false,&quot;title&quot;:&quot;【游戏框架系列】简单的图形学（一）&quot;,&quot;url&quot;:&quot;\u002Fp\u002F30864679&quot;,&quot;commentPermission&quot;:&quot;ARTICLE_ALL_CAN_COMMENT&quot;,&quot;snapshotUrl&quot;:&quot;&quot;,&quot;created&quot;:1510149297,&quot;comments&quot;:0,&quot;columnId&quot;:0,&quot;content&quot;:&quot;&quot;,&quot;parentId&quot;:0,&quot;state&quot;:&quot;ARTICLE_PUBLISHED&quot;,&quot;imageUrl&quot;:&quot;https:\u002F\u002Fpic3.zhimg.com\u002Fv2-906c83976041e220e95ca93cbd8bf476_r.png&quot;,&quot;author&quot;:{&quot;bio&quot;:&quot;专业研究野生技术&quot;,&quot;isFollowing&quot;:false,&quot;hash&quot;:&quot;7a228f3d98a5d011f952110c10dc4976&quot;,&quot;uid&quot;:71809588264960,&quot;isOrg&quot;:false,&quot;slug&quot;:&quot;bajdcc&quot;,&quot;isFollowed&quot;:false,&quot;description&quot;:&quot;专业研究野生技术 https:\u002F\u002Fgithub.com\u002Fbajdcc&quot;,&quot;name&quot;:&quot;陈安&quot;,&quot;profileUrl&quot;:&quot;https:\u002F\u002Fwww.zhihu.com\u002Fpeople\u002Fbajdcc&quot;,&quot;avatar&quot;:{&quot;id&quot;:&quot;v2-cd6d61ad9ef94c41b9e77f8e0f727893&quot;,&quot;template&quot;:&quot;https:\u002F\u002Fpic4.zhimg.com\u002F50\u002F{id}_{size}.jpg&quot;},&quot;isOrgWhiteList&quot;:false,&quot;isBanned&quot;:false},&quot;memberId&quot;:10760740,&quot;excerptTitle&quot;:&quot;&quot;,&quot;voteType&quot;:&quot;ARTICLE_VOTE_CLEAR&quot;},&quot;id&quot;:912912}],&quot;title&quot;:&quot;【游戏框架系列】简单的图形学（一）&quot;,&quot;author&quot;:&quot;bajdcc&quot;,&quot;content&quot;:&quot;\u003Cp\u003E看到叶大的文章\u003Ca href=\&quot;http:\u002F\u002Flink.zhihu.com\u002F?target=http%3A\u002F\u002Fwww.cnblogs.com\u002Fmiloyip\u002Farchive\u002F2010\u002F03\u002F29\u002F1698953.html\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;\u003E用JavaScript玩转计算机图形学(一)光线追踪入门 - Milo Yip - 博客园\u003Ci class=\&quot;icon-external\&quot;\u003E\u003C\u002Fi\u003E\u003C\u002Fa\u003E，里面有几个小例子，所以把这些效果用C++再实现一遍。\u003C\u002Fp\u003E\u003Cp\u003E\u003Ca href=\&quot;http:\u002F\u002Flink.zhihu.com\u002F?target=https%3A\u002F\u002Fgithub.com\u002Fbajdcc\u002FGameFramework\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;\u003Ebajdcc\u002FGameFramework\u003Ci class=\&quot;icon-external\&quot;\u003E\u003C\u002Fi\u003E\u003C\u002Fa\u003E，这一系列停更好久了，只是没想到比较有趣的点子，拿它来练习再好不过，原因有：Direct2D渲染、支持lua脚本、C++编写。由于是光线追踪，所以实际上可以说不依赖任何库，只要有一个CPU就能完成计算。\u003C\u002Fp\u003E\u003Cp\u003E目前只做了两个效果，具体的讲述移步博客，我不再赘述。\u003C\u002Fp\u003E\u003Cp\u003E代码：\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E\u003Ca href=\&quot;http:\u002F\u002Flink.zhihu.com\u002F?target=https%3A\u002F\u002Fgithub.com\u002Fbajdcc\u002FGameFramework\u002Fblob\u002Fmaster\u002FCCGameFramework\u002Fbase\u002Fpe2d\u002FRenderSphere.cpp\&quot; class=\&quot; external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;\u003E\u003Cspan class=\&quot;invisible\&quot;\u003Ehttps:\u002F\u002F\u003C\u002Fspan\u003E\u003Cspan class=\&quot;visible\&quot;\u003Egithub.com\u002Fbajdcc\u002FGameF\u003C\u002Fspan\u003E\u003Cspan class=\&quot;invisible\&quot;\u003Eramework\u002Fblob\u002Fmaster\u002FCCGameFramework\u002Fbase\u002Fpe2d\u002FRenderSphere.cpp\u003C\u002Fspan\u003E\u003Cspan class=\&quot;ellipsis\&quot;\u003E\u003C\u002Fspan\u003E\u003Ci class=\&quot;icon-external\&quot;\u003E\u003C\u002Fi\u003E\u003C\u002Fa\u003E（光线追踪）\u003C\u002Fli\u003E\u003Cli\u003E\u003Ca href=\&quot;http:\u002F\u002Flink.zhihu.com\u002F?target=https%3A\u002F\u002Fgithub.com\u002Fbajdcc\u002FGameFramework\u002Fblob\u002Fmaster\u002FCCGameFramework\u002Fbase\u002Fpe2d\u002FPhysicsEngine2D.cpp%23L73\&quot; class=\&quot; external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;\u003E\u003Cspan class=\&quot;invisible\&quot;\u003Ehttps:\u002F\u002F\u003C\u002Fspan\u003E\u003Cspan class=\&quot;visible\&quot;\u003Egithub.com\u002Fbajdcc\u002FGameF\u003C\u002Fspan\u003E\u003Cspan class=\&quot;invisible\&quot;\u003Eramework\u002Fblob\u002Fmaster\u002FCCGameFramework\u002Fbase\u002Fpe2d\u002FPhysicsEngine2D.cpp#L73\u003C\u002Fspan\u003E\u003Cspan class=\&quot;ellipsis\&quot;\u003E\u003C\u002Fspan\u003E\u003Ci class=\&quot;icon-external\&quot;\u003E\u003C\u002Fi\u003E\u003C\u002Fa\u003E（色彩图）\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Ch2\u003E色彩图\u003C\u002Fh2\u003E\u003Cfigure\u003E\u003Cnoscript\u003E\u003Cimg src=\&quot;https:\u002F\u002Fpic4.zhimg.com\u002Fv2-e881ddc4dd33a86c452dc8521b4ad2e3_b.jpg\&quot; data-rawwidth=\&quot;1031\&quot; data-rawheight=\&quot;628\&quot; class=\&quot;origin_image zh-lightbox-thumb\&quot; width=\&quot;1031\&quot; data-original=\&quot;https:\u002F\u002Fpic4.zhimg.com\u002Fv2-e881ddc4dd33a86c452dc8521b4ad2e3_r.jpg\&quot;\u003E\u003C\u002Fnoscript\u003E\u003Cimg src=\&quot;data:image\u002Fsvg+xml;utf8,&amp;lt;svg%20xmlns=&#x27;http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg&#x27;%20width=&#x27;1031&#x27;%20height=&#x27;628&#x27;&amp;gt;&amp;lt;\u002Fsvg&amp;gt;\&quot; data-rawwidth=\&quot;1031\&quot; data-rawheight=\&quot;628\&quot; class=\&quot;origin_image zh-lightbox-thumb lazy\&quot; width=\&quot;1031\&quot; data-original=\&quot;https:\u002F\u002Fpic4.zhimg.com\u002Fv2-e881ddc4dd33a86c452dc8521b4ad2e3_r.jpg\&quot; data-actualsrc=\&quot;https:\u002F\u002Fpic4.zhimg.com\u002Fv2-e881ddc4dd33a86c452dc8521b4ad2e3_b.jpg\&quot;\u003E\u003Cfigcaption\u003E色彩图\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E这只是一个基本的例子，讲述如何通过像素操作来改变色彩。\u003C\u002Fp\u003E\u003Cp\u003E我们一张图就如同一个二阶矩阵，每个颜色是一个int，就这么简单。\u003C\u002Fp\u003E\u003Cp\u003E具体实现的过程：\u003C\u002Fp\u003E\u003Col\u003E\u003Cli\u003E窗口收到WM_PAINT消息，开始启用Direct2D绘制\u003C\u002Fli\u003E\u003Cli\u003E我们的窗口里面是树状关系的窗口\u002F控件组，所以递归执行绘制操作\u003C\u002Fli\u003E\u003Cli\u003E展示控件执行绘制操作\u003C\u002Fli\u003E\u003Cli\u003E创建一个颜色数组，修改之\u003C\u002Fli\u003E\u003Cli\u003E根据数组创建一个位图，将它保存供重用\u003C\u002Fli\u003E\u003Cli\u003E利用Direct2D的渲染操作将该位图渲染\u003C\u002Fli\u003E\u003C\u002Fol\u003E\u003Ch2\u003E简单的光线追踪\u003C\u002Fh2\u003E\u003Cfigure\u003E\u003Cnoscript\u003E\u003Cimg src=\&quot;https:\u002F\u002Fpic3.zhimg.com\u002Fv2-906c83976041e220e95ca93cbd8bf476_b.jpg\&quot; data-rawwidth=\&quot;1031\&quot; data-rawheight=\&quot;628\&quot; class=\&quot;origin_image zh-lightbox-thumb\&quot; width=\&quot;1031\&quot; data-original=\&quot;https:\u002F\u002Fpic3.zhimg.com\u002Fv2-906c83976041e220e95ca93cbd8bf476_r.jpg\&quot;\u003E\u003C\u002Fnoscript\u003E\u003Cimg src=\&quot;data:image\u002Fsvg+xml;utf8,&amp;lt;svg%20xmlns=&#x27;http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg&#x27;%20width=&#x27;1031&#x27;%20height=&#x27;628&#x27;&amp;gt;&amp;lt;\u002Fsvg&amp;gt;\&quot; data-rawwidth=\&quot;1031\&quot; data-rawheight=\&quot;628\&quot; class=\&quot;origin_image zh-lightbox-thumb lazy\&quot; width=\&quot;1031\&quot; data-original=\&quot;https:\u002F\u002Fpic3.zhimg.com\u002Fv2-906c83976041e220e95ca93cbd8bf476_r.jpg\&quot; data-actualsrc=\&quot;https:\u002F\u002Fpic3.zhimg.com\u002Fv2-906c83976041e220e95ca93cbd8bf476_b.jpg\&quot;\u003E\u003Cfigcaption\u003E光线追踪(左) 以及 法向量图(右)\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E左边的光线追踪我一开始也没有搞明白，等到实现之后才明白。\u003C\u002Fp\u003E\u003Cp\u003E实现原理很简单：\u003C\u002Fp\u003E\u003Col\u003E\u003Cli\u003E一个眼睛，一个球，没有光\u003C\u002Fli\u003E\u003Cli\u003E最终的结果要投影到一块屏幕上，屏幕和眼睛是有一个距离的，就像拍照时手要比个相框一样\u003C\u002Fli\u003E\u003Cli\u003E眼睛、屏幕、球，万事俱备（详见\u003Ca href=\&quot;http:\u002F\u002Flink.zhihu.com\u002F?target=http%3A\u002F\u002Fwww.cnblogs.com\u002Fmiloyip\u002Farchive\u002F2010\u002F03\u002F29\u002F1698953.html\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;\u003E用JavaScript玩转计算机图形学(一)光线追踪入门 - Milo Yip - 博客园\u003Ci class=\&quot;icon-external\&quot;\u003E\u003C\u002Fi\u003E\u003C\u002Fa\u003E 第一张图）\u003C\u002Fli\u003E\u003C\u002Fol\u003E\u003Cp\u003E最主要操作：\u003C\u002Fp\u003E\u003Col\u003E\u003Cli\u003E屏幕上给每个像素标记一个点\u003C\u002Fli\u003E\u003Cli\u003E眼睛与那些点形成一个射线（光线）\u003C\u002Fli\u003E\u003Cli\u003E射线无限延长（追踪），你把它看成激光\u003C\u002Fli\u003E\u003Cli\u003E激光有可能就照在了球上，也有可能不在球上\u003C\u002Fli\u003E\u003Cli\u003E对于照在球上的激光，我只要算一下\u003Cb\u003E激光出发点（眼睛）到激光结束点（激光与球交点）的距离\u003C\u002Fb\u003E即可。\u003C\u002Fli\u003E\u003Cli\u003E将两者距离（正数）最终映射到0-255，即RGB，根据RGB值确定像素颜色\u003C\u002Fli\u003E\u003Cli\u003E如果激光没有打中球，对应像素表现为黑色\u003C\u002Fli\u003E\u003C\u002Fol\u003E\u003Cp\u003E理一下映射关系：\u003Cb\u003E3D空间--&amp;gt;2D屏幕，距离--&amp;gt;像素颜色\u003C\u002Fb\u003E。\u003C\u002Fp\u003E\u003Cp\u003E右边是一个法向量图，不同的是：并非由距离确定像素颜色，而是由\u003Cb\u003E该点法向量\u003C\u002Fb\u003E确定颜色。\u003C\u002Fp\u003E\u003Cp\u003E激光打中球时，我们计算出交点的坐标，同时也计算出激光到该点的直线，其实就是法向量。\u003C\u002Fp\u003E\u003Cp\u003E法向量方程有四个参数，但是这里场景很简单——球的法向量（单位向量）\u003Cb\u003E经过球心\u003C\u002Fb\u003E，所以其实只有三个参数，我们将三个参数（-1~1）映射到RGB。\u003C\u002Fp\u003E\u003Cp\u003E\u003Cbr\u003E\u003C\u002Fp\u003E\u003Cp\u003E后面要完成的：\u003C\u002Fp\u003E\u003Col\u003E\u003Cli\u003E\u003Ca href=\&quot;http:\u002F\u002Flink.zhihu.com\u002F?target=http%3A\u002F\u002Fwww.cnblogs.com\u002Fmiloyip\u002Farchive\u002F2010\u002F04\u002F02\u002F1702768.html\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;\u003E用JavaScript玩转计算机图形学(二)基本光源 - Milo Yip - 博客园\u003Ci class=\&quot;icon-external\&quot;\u003E\u003C\u002Fi\u003E\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Ca href=\&quot;https:\u002F\u002Fzhuanlan.zhihu.com\u002Fp\u002F30745861\&quot; class=\&quot;internal\&quot;\u003E用 C 语言画光（一）：基础\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003Cli\u003E\u003Ca href=\&quot;https:\u002F\u002Fzhuanlan.zhihu.com\u002Fp\u002F30748318\&quot; class=\&quot;internal\&quot;\u003E用 C 语言画光（二）：构造实体几何\u003C\u002Fa\u003E\u003C\u002Fli\u003E\u003C\u002Fol\u003E\u003Cp\u003E\u003C\u002Fp\u003E&quot;,&quot;updated&quot;:new Date(&quot;2017-11-08T13:54:57.000Z&quot;),&quot;canComment&quot;:false,&quot;commentPermission&quot;:&quot;anyone&quot;,&quot;commentCount&quot;:0,&quot;collapsedCount&quot;:0,&quot;likeCount&quot;:29,&quot;state&quot;:&quot;published&quot;,&quot;isLiked&quot;:false,&quot;slug&quot;:&quot;30864679&quot;,&quot;isTitleImageFullScreen&quot;:false,&quot;rating&quot;:&quot;none&quot;,&quot;titleImage&quot;:&quot;https:\u002F\u002Fpic3.zhimg.com\u002Fv2-906c83976041e220e95ca93cbd8bf476_r.png&quot;,&quot;links&quot;:{&quot;comments&quot;:&quot;\u002Fapi\u002Fposts\u002F30864679\u002Fcomments&quot;},&quot;reviewers&quot;:[],&quot;topics&quot;:[{&quot;url&quot;:&quot;https:\u002F\u002Fwww.zhihu.com\u002Ftopic\u002F19613730&quot;,&quot;id&quot;:&quot;19613730&quot;,&quot;name&quot;:&quot;计算机图形学&quot;},{&quot;url&quot;:&quot;https:\u002F\u002Fwww.zhihu.com\u002Ftopic\u002F19601705&quot;,&quot;id&quot;:&quot;19601705&quot;,&quot;name&quot;:&quot;C \u002F C++&quot;},{&quot;url&quot;:&quot;https:\u002F\u002Fwww.zhihu.com\u002Ftopic\u002F20065767&quot;,&quot;id&quot;:&quot;20065767&quot;,&quot;name&quot;:&quot;光线跟踪&quot;}],&quot;adminClosedComment&quot;:false,&quot;titleImageSize&quot;:{&quot;width&quot;:1031,&quot;height&quot;:628},&quot;href&quot;:&quot;\u002Fapi\u002Fposts\u002F30864679&quot;,&quot;excerptTitle&quot;:&quot;&quot;,&quot;tipjarState&quot;:&quot;inactivated&quot;,&quot;annotationAction&quot;:[],&quot;sourceUrl&quot;:&quot;&quot;,&quot;pageCommentsCount&quot;:0,&quot;hasPublishingDraft&quot;:false,&quot;snapshotUrl&quot;:&quot;&quot;,&quot;publishedTime&quot;:&quot;2017-11-08T21:54:57+08:00&quot;,&quot;url&quot;:&quot;\u002Fp\u002F30864679&quot;,&quot;lastestLikers&quot;:[{&quot;bio&quot;:&quot;程序员&quot;,&quot;isFollowing&quot;:false,&quot;hash&quot;:&quot;4e74e4e8e90946ddfdb917a79e57ae5d&quot;,&quot;uid&quot;:59206665240576,&quot;isOrg&quot;:false,&quot;slug&quot;:&quot;feng-ming-xiao&quot;,&quot;isFollowed&quot;:false,&quot;description&quot;:&quot;&quot;,&quot;name&quot;:&quot;Inspiration&quot;,&quot;profileUrl&quot;:&quot;https:\u002F\u002Fwww.zhihu.com\u002Fpeople\u002Ffeng-ming-xiao&quot;,&quot;avatar&quot;:{&quot;id&quot;:&quot;da8e974dc&quot;,&quot;template&quot;:&quot;https:\u002F\u002Fpic1.zhimg.com\u002F{id}_{size}.jpg&quot;},&quot;isOrgWhiteList&quot;:false,&quot;isBanned&quot;:false},{&quot;bio&quot;:null,&quot;isFollowing&quot;:false,&quot;hash&quot;:&quot;3c2b6c411d5dd6eb8de72b6184379c3b&quot;,&quot;uid&quot;:662045354279702500,&quot;isOrg&quot;:false,&quot;slug&quot;:&quot;jia-ru-meng-xiang-shi-xian&quot;,&quot;isFollowed&quot;:false,&quot;description&quot;:&quot;&quot;,&quot;name&quot;:&quot;我想很开心&quot;,&quot;profileUrl&quot;:&quot;https:\u002F\u002Fwww.zhihu.com\u002Fpeople\u002Fjia-ru-meng-xiang-shi-xian&quot;,&quot;avatar&quot;:{&quot;id&quot;:&quot;v2-9659f46a58c799413677bd21de538544&quot;,&quot;template&quot;:&quot;https:\u002F\u002Fpic1.zhimg.com\u002F50\u002F{id}_{size}.jpg&quot;},&quot;isOrgWhiteList&quot;:false,&quot;isBanned&quot;:false},{&quot;bio&quot;:null,&quot;isFollowing&quot;:false,&quot;hash&quot;:&quot;d801bc3aeea43da385b9fe053b310f1e&quot;,&quot;uid&quot;:646364708026978300,&quot;isOrg&quot;:false,&quot;slug&quot;:&quot;xiao-mu-jin-49&quot;,&quot;isFollowed&quot;:false,&quot;description&quot;:&quot;&quot;,&quot;name&quot;:&quot;王本亮&quot;,&quot;profileUrl&quot;:&quot;https:\u002F\u002Fwww.zhihu.com\u002Fpeople\u002Fxiao-mu-jin-49&quot;,&quot;avatar&quot;:{&quot;id&quot;:&quot;v2-29df0d7401bc1f4c44a31cf3cfb4edf9&quot;,&quot;template&quot;:&quot;https:\u002F\u002Fpic2.zhimg.com\u002F50\u002F{id}_{size}.jpg&quot;},&quot;isOrgWhiteList&quot;:false,&quot;isBanned&quot;:false},{&quot;bio&quot;:&quot;键盘上的活动宝宝\u002F反动&quot;,&quot;isFollowing&quot;:false,&quot;hash&quot;:&quot;8ebaed2e3e1db62a7f7fd6b44588af95&quot;,&quot;uid&quot;:65474322759680,&quot;isOrg&quot;:false,&quot;slug&quot;:&quot;heavenshu-kuang&quot;,&quot;isFollowed&quot;:false,&quot;description&quot;:&quot;&quot;,&quot;name&quot;:&quot;heaven疏狂&quot;,&quot;profileUrl&quot;:&quot;https:\u002F\u002Fwww.zhihu.com\u002Fpeople\u002Fheavenshu-kuang&quot;,&quot;avatar&quot;:{&quot;id&quot;:&quot;v2-fb45e2338594c3785fad93f109098c2f&quot;,&quot;template&quot;:&quot;https:\u002F\u002Fpic4.zhimg.com\u002F50\u002F{id}_{size}.jpg&quot;},&quot;isOrgWhiteList&quot;:false,&quot;isBanned&quot;:false},{&quot;bio&quot;:&quot;Everything&quot;,&quot;isFollowing&quot;:false,&quot;hash&quot;:&quot;1ff93769508ec64fed6c1b39ea179367&quot;,&quot;uid&quot;:910196965852196900,&quot;isOrg&quot;:false,&quot;slug&quot;:&quot;xqm32&quot;,&quot;isFollowed&quot;:false,&quot;description&quot;:&quot;&quot;,&quot;name&quot;:&quot;xqm32&quot;,&quot;profileUrl&quot;:&quot;https:\u002F\u002Fwww.zhihu.com\u002Fpeople\u002Fxqm32&quot;,&quot;avatar&quot;:{&quot;id&quot;:&quot;da8e974dc&quot;,&quot;template&quot;:&quot;https:\u002F\u002Fpic1.zhimg.com\u002F{id}_{size}.jpg&quot;},&quot;isOrgWhiteList&quot;:false,&quot;isBanned&quot;:false}],&quot;summary&quot;:&quot;\u003Cimg src=\&quot;https:\u002F\u002Fpic4.zhimg.com\u002F50\u002Fv2-e881ddc4dd33a86c452dc8521b4ad2e3_200x112.jpg\&quot; data-caption=\&quot;色彩图\&quot; data-rawwidth=\&quot;1031\&quot; data-rawheight=\&quot;628\&quot; class=\&quot;origin_image inline-img zh-lightbox-thumb\&quot; data-original=\&quot;https:\u002F\u002Fpic4.zhimg.com\u002F50\u002Fv2-e881ddc4dd33a86c452dc8521b4ad2e3_r.jpg\&quot;\u003E看到叶大的文章\u003Ca href=\&quot;http:\u002F\u002Fwww.cnblogs.com\u002Fmiloyip\u002Farchive\u002F2010\u002F03\u002F29\u002F1698953.html\&quot;\u003E用JavaScript玩转计算机图形学(一)光线追踪入门 - Milo Yip - 博客园\u003C\u002Fa\u003E，里面有几个小例子，所以把这些效果用C++再实现一遍。\u003Ca href=\&quot;https:\u002F\u002Fgithub.com\u002Fbajdcc\u002FGameFramework\&quot;\u003Ebajdcc\u002FGameFramework\u003C\u002Fa\u003E，这一系列停更好久了，只是没想到比较有趣的点子，拿它来练习再好不过，原因有：Direct2D渲染…&quot;,&quot;reviewingCommentsCount&quot;:0,&quot;meta&quot;:{&quot;previous&quot;:null,&quot;next&quot;:null},&quot;annotationDetail&quot;:null,&quot;commentsCount&quot;:0,&quot;likesCount&quot;:29,&quot;FULLINFO&quot;:true}},&quot;User&quot;:{&quot;bajdcc&quot;:{&quot;isFollowed&quot;:false,&quot;name&quot;:&quot;陈安&quot;,&quot;headline&quot;:&quot;专业研究野生技术 https:\u002F\u002Fgithub.com\u002Fbajdcc&quot;,&quot;avatarUrl&quot;:&quot;https:\u002F\u002Fpic4.zhimg.com\u002F50\u002Fv2-cd6d61ad9ef94c41b9e77f8e0f727893_s.jpg&quot;,&quot;isFollowing&quot;:false,&quot;type&quot;:&quot;people&quot;,&quot;slug&quot;:&quot;bajdcc&quot;,&quot;bio&quot;:&quot;专业研究野生技术&quot;,&quot;hash&quot;:&quot;7a228f3d98a5d011f952110c10dc4976&quot;,&quot;uid&quot;:71809588264960,&quot;isOrg&quot;:false,&quot;description&quot;:&quot;专业研究野生技术 https:\u002F\u002Fgithub.com\u002Fbajdcc&quot;,&quot;badge&quot;:{&quot;identity&quot;:null,&quot;bestAnswerer&quot;:null},&quot;profileUrl&quot;:&quot;https:\u002F\u002Fwww.zhihu.com\u002Fpeople\u002Fbajdcc&quot;,&quot;avatar&quot;:{&quot;id&quot;:&quot;v2-cd6d61ad9ef94c41b9e77f8e0f727893&quot;,&quot;template&quot;:&quot;https:\u002F\u002Fpic4.zhimg.com\u002F50\u002F{id}_{size}.jpg&quot;},&quot;isOrgWhiteList&quot;:false,&quot;isBanned&quot;:false}},&quot;Comment&quot;:{},&quot;favlists&quot;:{}},&quot;me&quot;:{},&quot;global&quot;:{&quot;experimentFeatures&quot;:{&quot;ge3&quot;:&quot;ge3_9&quot;,&quot;ge2&quot;:&quot;ge2_1&quot;,&quot;nwebStickySidebar&quot;:&quot;sticky&quot;,&quot;androidPassThroughPush&quot;:&quot;all&quot;,&quot;newMore&quot;:&quot;new&quot;,&quot;nwebFeedAd&quot;:&quot;experiment&quot;,&quot;newSign&quot;:&quot;newVersion&quot;,&quot;liveReviewBuyBar&quot;:&quot;live_review_buy_bar_2&quot;,&quot;qawebRelatedReadingsContentControl&quot;:&quot;open&quot;,&quot;liveStore&quot;:&quot;ls_a2_b2_c1_f2&quot;,&quot;qawebThumbnailAbtest&quot;:&quot;new&quot;,&quot;searchHybridTabs&quot;:&quot;without-tabs&quot;,&quot;enableVoteDownReasonMenu&quot;:&quot;disable&quot;,&quot;iOSEnableFeedModuleWWANAritclePreRender&quot;:&quot;iOS_FeedModule_WWAN_PreRender_Enable&quot;,&quot;isOffice&quot;:&quot;false&quot;,&quot;enableTtsPlay&quot;:&quot;false&quot;,&quot;liveDetailWechatBanner&quot;:&quot;Live_detail_wechat_banner_1&quot;,&quot;wechatShareModal&quot;:&quot;wechat_share_modal_show&quot;,&quot;newLiveFeedMediacard&quot;:&quot;old&quot;,&quot;homeUi2&quot;:&quot;default&quot;,&quot;showVideoUploadAttention&quot;:&quot;true&quot;,&quot;recommendationAbtest&quot;:&quot;new&quot;,&quot;marketTab&quot;:&quot;market_tab_old&quot;,&quot;qrcodeLogin&quot;:&quot;qrcode&quot;,&quot;isShowUnicomFreeEntry&quot;:&quot;unicom_free_entry_off&quot;,&quot;newMobileColumnAppheader&quot;:&quot;new_header&quot;,&quot;androidDbCommentWithRepinRecord&quot;:&quot;open&quot;,&quot;androidDbRecommendAction&quot;:&quot;open&quot;,&quot;zcmLighting&quot;:&quot;zcm&quot;,&quot;favAct&quot;:&quot;default&quot;,&quot;appStoreRateDialog&quot;:&quot;close&quot;,&quot;mobileQaPageProxyHeifetz&quot;:&quot;m_qa_page_nweb&quot;,&quot;newAppViewRelatedAd&quot;:&quot;yes&quot;,&quot;default&quot;:&quot;None&quot;,&quot;isNewNotiPanel&quot;:&quot;yes&quot;,&quot;androidDbRepinSelection&quot;:&quot;open&quot;,&quot;nwebRelatedAdvert&quot;:&quot;default&quot;,&quot;qaStickySidebar&quot;:&quot;sticky_sidebar&quot;,&quot;androidProfilePanel&quot;:&quot;panel_b&quot;,&quot;nwebWriteAnswer&quot;:&quot;experiment&quot;}},&quot;columns&quot;:{&quot;next&quot;:{}},&quot;columnPosts&quot;:{},&quot;columnSettings&quot;:{&quot;colomnAuthor&quot;:[],&quot;uploadAvatarDetails&quot;:&quot;&quot;,&quot;contributeRequests&quot;:[],&quot;contributeRequestsTotalCount&quot;:0,&quot;inviteAuthor&quot;:&quot;&quot;},&quot;postComments&quot;:{},&quot;postReviewComments&quot;:{&quot;comments&quot;:[],&quot;newComments&quot;:[],&quot;hasMore&quot;:true},&quot;favlistsByUser&quot;:{},&quot;favlistRelations&quot;:{},&quot;promotions&quot;:{},&quot;switches&quot;:{&quot;couldSetPoster&quot;:false},&quot;draft&quot;:{&quot;titleImage&quot;:&quot;&quot;,&quot;titleImageSize&quot;:{},&quot;isTitleImageFullScreen&quot;:false,&quot;canTitleImageFullScreen&quot;:false,&quot;title&quot;:&quot;&quot;,&quot;titleImageUploading&quot;:false,&quot;error&quot;:&quot;&quot;,&quot;content&quot;:&quot;&quot;,&quot;draftLoading&quot;:false,&quot;globalLoading&quot;:false,&quot;pendingVideo&quot;:{&quot;resource&quot;:null,&quot;error&quot;:null}},&quot;drafts&quot;:{&quot;draftsList&quot;:[],&quot;next&quot;:{}},&quot;config&quot;:{&quot;userNotBindPhoneTipString&quot;:{}},&quot;recommendPosts&quot;:{&quot;articleRecommendations&quot;:[],&quot;columnRecommendations&quot;:[]},&quot;env&quot;:{&quot;edition&quot;:{&quot;baidu&quot;:false,&quot;yidianzixun&quot;:false,&quot;qqnews&quot;:false},&quot;isAppView&quot;:false,&quot;appViewConfig&quot;:{&quot;content_padding_top&quot;:128,&quot;content_padding_bottom&quot;:56,&quot;content_padding_left&quot;:16,&quot;content_padding_right&quot;:16,&quot;title_font_size&quot;:22,&quot;body_font_size&quot;:16,&quot;is_dark_theme&quot;:false,&quot;can_auto_load_image&quot;:true,&quot;app_info&quot;:&quot;OS=iOS&quot;},&quot;isApp&quot;:false,&quot;userAgent&quot;:{&quot;ua&quot;:&quot;Wget\u002F1.19.1 (cygwin)&quot;,&quot;browser&quot;:{},&quot;engine&quot;:{},&quot;os&quot;:{},&quot;device&quot;:{},&quot;cpu&quot;:{}}},&quot;message&quot;:{&quot;newCount&quot;:0},&quot;pushNotification&quot;:{&quot;newCount&quot;:0}}</textarea><script src="//static.zhihu.com/hemingway/common.95b19b48d0d6b20aae46.js"></script><script src="//static.zhihu.com/hemingway/app.40eeaeeef4c006d528d0.js"></script><script src="//static.zhihu.com/hemingway/raven.bdd8772ab8ba1205b8ea.js" async="" defer=""></script></body></html>