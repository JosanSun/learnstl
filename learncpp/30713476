<!doctype html>
<html lang="zh" class=""><head><meta charset="utf-8"/><title data-react-helmet="true">【Codewars】7×7 摩天大楼</title><meta name="renderer" content="webkit"/><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/><meta name="force-rendering" content="webkit"/><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/><meta name="google-site-verification" content="FTeR0c8arOPKh8c5DYh_9uu98_zJbaWw53J-Sch9MTg"/><link rel="shortcut icon" href="https://static.zhihu.com/static/favicon.ico" type="image/x-icon"/><link href="//static.zhihu.com/hemingway/app.36335a6d5e421112e55e12ecfbff7ac5.css" rel="stylesheet"/><style></style></head><body><div id="react-root"><div><div class="Layout av-cardBackground" data-zop-userToken="{&quot;userToken&quot;:&quot;&quot;}"><div class="Layout-navbarHolder"><header class="Navbar"><div class="Navbar-logo-wrapper"><a class="Navbar-logo icon-ic_zhihu_logo" href="//www.zhihu.com" target="_blank" rel="noopener noreferrer" aria-label="知乎首页"></a></div><div class="Navbar-postTitle Navbar-title"><a href="https://zhuanlan.zhihu.com/learncpp"><img class="Navbar-columnIcon" alt="学习C++" src="https://pic2.zhimg.com/v2-bf63794c542fc73b11e17014b7e0d01d_m.jpg"/></a><div class="Navbar-postTitleName"><span class="Navbar-postTitleMeta">首发于</span><a class="Navbar-postTitleMain" href="https://zhuanlan.zhihu.com/learncpp">学习C++</a></div></div><div class="Navbar-functionality"><a class="Navbar-write"><i class="icon icon-ic_nav_new"></i>写文章</a><button class="Button Navbar-loginButon Button--blue" type="button">登录</button></div></header></div><div></div><div class="Layout-main av-card av-paddingBottom av-bodyFont Layout-titleImage--normal"><div class="PostIndex-header av-paddingTop av-card" data-zop="{&quot;authorName&quot;:&quot;陈安&quot;,&quot;itemId&quot;:&quot;30713476&quot;,&quot;title&quot;:&quot;【Codewars】7×7 摩天大楼&quot;,&quot;type&quot;:&quot;article&quot;}"><div class="TitleImage"><img alt="【Codewars】7×7 摩天大楼" src="https://pic2.zhimg.com/v2-b02ba5440139b21ee6a2ceba5158c0ed_r.png" class="TitleImage-imagePure"/></div><h1 class="PostIndex-title av-paddingSide av-titleFont">【Codewars】7×7 摩天大楼</h1><div class="PostIndex-author"><a href="https://www.zhihu.com/people/bajdcc" target="_blank" rel="noopener noreferrer"><img class="Avatar-hemingway PostIndex-authorAvatar Avatar--xs" alt="陈安" src="https://pic4.zhimg.com/50/v2-cd6d61ad9ef94c41b9e77f8e0f727893_xs.jpg" srcset="https://pic4.zhimg.com/50/v2-cd6d61ad9ef94c41b9e77f8e0f727893_l.jpg 2x"/></a><a href="https://www.zhihu.com/people/bajdcc" target="_blank" class="PostIndex-authorName">陈安</a><span class="Bull"></span><div class="HoverTitle" data-hover-title="Fri, Nov 3, 2017 4:47 PM"><time datetime="Fri Nov 03 2017 16:47:12 GMT+0800 (CST)">a month ago</time></div></div></div><div class="RichText PostIndex-content av-paddingSide av-card"><h2>介绍</h2><p>链接：<a href="http://link.zhihu.com/?target=https%3A//www.codewars.com/kata/7x7-skyscrapers/" class=" wrap external" target="_blank" rel="nofollow noreferrer">7×7 Skyscrapers<i class="icon-external"></i></a></p><p>C#答案（原因：懒，但是完全可以转成C++）：<a href="http://link.zhihu.com/?target=https%3A//github.com/bajdcc/learnstl/blob/master/codewars/7x7-skyscrapers/csharp_solution.cs" class=" wrap external" target="_blank" rel="nofollow noreferrer">bajdcc/learnstl<i class="icon-external"></i></a></p><p>题目（机翻）：</p><p>在7乘7格的网格中，你只想在每个广场上放置一个摩天大楼，只有一些线索：</p><ul><li>摩天大楼的高度在1到7之间</li><li>一行或一列中的所有摩天大楼楼层数量各不相同</li><li>你只知道从外面的一行或一列中看到的摩天大楼的数量</li><li>高层摩天大楼阻挡了后面的下层摩天大楼，导致你看不到后面的大楼了</li></ul><p>你能写一个能解决这个难题的程序吗？</p><p>举个例子，6x6的：</p><figure><noscript><img src="https://pic2.zhimg.com/v2-a45496bad9d0aadfb3e2361ac5b8ad49_b.jpg" data-rawwidth="292" data-rawheight="296" class="content_image" width="292"></noscript><img src="data:image/svg+xml;utf8,&lt;svg%20xmlns='http://www.w3.org/2000/svg'%20width='292'%20height='296'&gt;&lt;/svg&gt;" data-rawwidth="292" data-rawheight="296" class="content_image lazy" width="292" data-actualsrc="https://pic2.zhimg.com/v2-a45496bad9d0aadfb3e2361ac5b8ad49_b.jpg"><figcaption>6x6 摩天大楼 例</figcaption></figure><p><b>（有人说看不懂规则3和4，我就以图来说明一下）</b></p><p>我根据上图制作了一个假城市（<a href="http://link.zhihu.com/?target=https%3A//github.com/bajdcc/UnityTest" class=" wrap external" target="_blank" rel="nofollow noreferrer">bajdcc/UnityTest<i class="icon-external"></i></a>），如下：</p><figure><noscript><img src="https://pic2.zhimg.com/v2-9a35e16413c8e62d9ec55abd6c0a5d3d_b.jpg" data-rawwidth="739" data-rawheight="614" class="origin_image zh-lightbox-thumb" width="739" data-original="https://pic2.zhimg.com/v2-9a35e16413c8e62d9ec55abd6c0a5d3d_r.jpg"></noscript><img src="data:image/svg+xml;utf8,&lt;svg%20xmlns='http://www.w3.org/2000/svg'%20width='739'%20height='614'&gt;&lt;/svg&gt;" data-rawwidth="739" data-rawheight="614" class="origin_image zh-lightbox-thumb lazy" width="739" data-original="https://pic2.zhimg.com/v2-9a35e16413c8e62d9ec55abd6c0a5d3d_r.jpg" data-actualsrc="https://pic2.zhimg.com/v2-9a35e16413c8e62d9ec55abd6c0a5d3d_b.jpg"><figcaption>虚拟城市</figcaption></figure><p>我们看线索中的左侧（3，4，4）：</p><figure><noscript><img src="https://pic1.zhimg.com/v2-489542dd990bc52f26c035d8b8b58398_b.jpg" data-rawwidth="674" data-rawheight="520" class="origin_image zh-lightbox-thumb" width="674" data-original="https://pic1.zhimg.com/v2-489542dd990bc52f26c035d8b8b58398_r.jpg"></noscript><img src="data:image/svg+xml;utf8,&lt;svg%20xmlns='http://www.w3.org/2000/svg'%20width='674'%20height='520'&gt;&lt;/svg&gt;" data-rawwidth="674" data-rawheight="520" class="origin_image zh-lightbox-thumb lazy" width="674" data-original="https://pic1.zhimg.com/v2-489542dd990bc52f26c035d8b8b58398_r.jpg" data-actualsrc="https://pic1.zhimg.com/v2-489542dd990bc52f26c035d8b8b58398_b.jpg"><figcaption>规则3和4的说明</figcaption></figure><h2>要求</h2><p>输入：int[]</p><figure><noscript><img src="https://pic1.zhimg.com/v2-587af0b069f7696a90049be18391f65c_b.jpg" data-rawwidth="273" data-rawheight="279" class="content_image" width="273"></noscript><img src="data:image/svg+xml;utf8,&lt;svg%20xmlns='http://www.w3.org/2000/svg'%20width='273'%20height='279'&gt;&lt;/svg&gt;" data-rawwidth="273" data-rawheight="279" class="content_image lazy" width="273" data-actualsrc="https://pic1.zhimg.com/v2-587af0b069f7696a90049be18391f65c_b.jpg"><figcaption>输入的数组下标</figcaption></figure><p>输出：int[][]</p><h2>分析</h2><p>花了两天思考这个系列的问题，最终当然是写出来了（光想没用）。</p><p>这个题目感觉跟数独很像，我最先想的思路就是一步步推理，直到解决问题，然而，4x4大小的推理规则在6x6大小的问题中，可能需要补充一些东西或有些东西不实用了，这就麻烦了。</p><p>老实说，做数独题的时候，我不怎么用穷举法，我是对当前局面进行推理，利用排除法一步步确定答案，但用代码实现推理就变得困难了，虽然这样做是最优的（因为根据不做多余计算）。<br>推理不能用，那就老老实实用穷举法吧，虽然穷举法有点low，但只要能过就行。</p><p>题目中透露了一些可供优化的信息：<b>各行各列中数是唯一的</b>。这就意味着复杂度从O(n^n)下降到O(n!)。这跟八皇后有点像，但又有所不同，因此我就用回溯法做。</p><h2>进一步思考</h2><p>确定用回溯做，也感觉可以借鉴八皇后的思路，还不能马上开工，有几个问题：</p><ol><li>全排列的生成，这个嘛拿之前的代码粘贴下</li><li>回溯遍历的顺序，这个顺序大有文章</li></ol><p>先解决全排列问题：抄了下<a href="http://link.zhihu.com/?target=https%3A//github.com/bajdcc/jProlog/blob/master/src/com/bajdcc/rt/gen/array/RtNorepArray.java%23L43" class=" external" target="_blank" rel="nofollow noreferrer"><span class="invisible">https://</span><span class="visible">github.com/bajdcc/jProl</span><span class="invisible">og/blob/master/src/com/bajdcc/rt/gen/array/RtNorepArray.java#L43</span><span class="ellipsis"></span><i class="icon-external"></i></a> 哈哈。</p><p>回溯的顺序应该是怎样呢？自己试喽。</p><p>先生成全排列，然后计算从左边向右看到的楼层数（假设为Sky函数，Sky:=int-&gt;int），将结果存到字典中。</p><p>会发现，当n=7时，sky(7)=1，可能性最低，都算出来后，排序。</p><p>sky(7)&lt;sky(6)&lt;sky(5)&lt;sky(1)&lt;sky(4)&lt;sky(3)&lt;sky(2)</p><p>展开顺序的话，我肯定先找n=7的情况的，因为这时的不确定性最低（解只有一个），相当于可以确定一个格子的值了。</p><p>目前的思路是：找到值=7的数，就直接敲定一排解（1~7）；再找值=6的数，这时答案不唯一，回溯；继续找……</p><p>这样运行程序的话，肯定是耗时很长的，原因是什么？</p><h2>再想一想</h2><p>我们优化程序的目标是回溯时尽可以减少回溯次数，那就必须在决定一个展开顺序：先展开不确定性小的，再展开不确定性较大的。</p><p>有一种情况，可以减少不确定性：如果一排格子的两侧都有数字（都不是零），那其实可以将它们放到一起回溯。例： 5 | x x x x x x x | 2，这样可以极大降低可能性。事实证明这样做有一点效果。</p><p>思路有了：</p><ol><li>将规则排好序（数大，对位匹配优先），回溯规则</li><li>保存现场，查看是否冲突，一是当前的测试值是否与该行/列冲突，二是测试值是否满足各行/列数唯一的原则</li><li>如果失败，回溯</li><li>如果成功，level+=1，再测试下一个规则</li><li>如果level==规则总数，意味着通过了所有规则，<b>此时还不能确定解是否正确</b></li><li>规则有覆盖不到的行/列，此时要将值是零的格子进行填空</li><li>填空的办法是用排除法，然后不断遍历填空，如果最后填空失败，则解不正确，如果填空成功，则解正确</li></ol><p>注意点：</p><ol><li>坐标系问题，方向问题</li><li>判断条件是否完备</li><li>尽量用数组做（用list&lt;&gt;竟然比int[]快。。）</li><li>等等细节问题</li></ol><p>代码比较啰嗦，460行，不贴了（别人写得都很短简直了）。</p></div><div class="PostIndex-footer"><div class="PostIndex-topics TopicItem-wrapper"><a class="TopicItem u-ellipsis PostIndex-topicItem" href="https://www.zhihu.com/topic/20091503">CodeWars</a><a class="TopicItem u-ellipsis PostIndex-topicItem" href="https://www.zhihu.com/topic/19590712">C#</a><a class="TopicItem u-ellipsis PostIndex-topicItem" href="https://www.zhihu.com/topic/19625716">算法与数据结构</a></div><div class="PostIndex-reviewers"></div><div class="PostIndex-vote"><button class="Button PostIndex-voteButton Button--green" aria-label="赞" type="button"><i class="icon icon-ic_column_like"></i>7</button><div class="PostIndex-voters"><div class="HoverTitle HoverTitle--slim" data-hover-title="OOO"><a href="https://www.zhihu.com/people/ooo-87-64" class="PostIndex-voter" target="_blank"><img class="Avatar-hemingway Avatar--is" alt="OOO" src="https://pic4.zhimg.com/50/v2-de24a8606a61532400979823923de1cb_is.jpg" srcset="https://pic4.zhimg.com/50/v2-de24a8606a61532400979823923de1cb_im.jpg 2x"/></a></div><div class="HoverTitle HoverTitle--slim" data-hover-title="初级勇者"><a href="https://www.zhihu.com/people/ma-jin-rui-67" class="PostIndex-voter" target="_blank"><img class="Avatar-hemingway Avatar--is" alt="初级勇者" src="https://pic1.zhimg.com/50/v2-144cc3a74544b69f22d0505572813c28_is.jpg" srcset="https://pic1.zhimg.com/50/v2-144cc3a74544b69f22d0505572813c28_im.jpg 2x"/></a></div><div class="HoverTitle HoverTitle--slim" data-hover-title="项港华"><a href="https://www.zhihu.com/people/xiang-gang-hua-10" class="PostIndex-voter" target="_blank"><img class="Avatar-hemingway Avatar--is" alt="项港华" src="https://pic1.zhimg.com/50/eebc698c31658989a96d7d8e77482a14_is.jpg" srcset="https://pic1.zhimg.com/50/eebc698c31658989a96d7d8e77482a14_im.jpg 2x"/></a></div><div class="HoverTitle HoverTitle--slim" data-hover-title="彭毛小民"><a href="https://www.zhihu.com/people/prime21" class="PostIndex-voter" target="_blank"><img class="Avatar-hemingway Avatar--is" alt="彭毛小民" src="https://pic3.zhimg.com/50/a25f5f40390aef05eb0c88344e69741e_is.jpg" srcset="https://pic3.zhimg.com/50/a25f5f40390aef05eb0c88344e69741e_im.jpg 2x"/></a></div><div class="HoverTitle HoverTitle--slim" data-hover-title="林官人"><a href="https://www.zhihu.com/people/wang-ze-lin-47" class="PostIndex-voter" target="_blank"><img class="Avatar-hemingway Avatar--is" alt="林官人" src="https://pic2.zhimg.com/50/v2-07fd795407226ea53680678a00eaee15_is.jpg" srcset="https://pic2.zhimg.com/50/v2-07fd795407226ea53680678a00eaee15_im.jpg 2x"/></a></div><a href="/p/30713476/voters" target="_blank" rel="noopener noreferrer" title="查看全部" class="PostIndex-allVoters"><i class="icon-ic_like_more"></i></a></div></div><div class="PostIndex-control"><div class="Fav"><button class="Button Button Button--plain FavButton" type="button"><i class="icon icon-ic_collect"></i>收藏</button></div><div class="PostShare"><div class="Menu"><button class="Button Button Button--plain MenuButton MenuButton-listen-hover Button Button--plain" type="button"><i class="icon icon-ic_column_share"></i>分享</button><div class="Menu-dropdown" style="visibility:hidden;"></div></div></div><div class="Report"><button class="Button Button Button--plain ReportButton" type="button"><i class="icon icon-ic_column_report"></i>举报</button></div></div></div><div class="Contributes PostIndex-contributes av-card"><div class="BlockTitle av-marginLeft av-borderColor"><span class="BlockTitle-title">文章被以下专栏收录</span><span class="BlockTitle-line"></span></div><ul class="Contributes-list"><li style="opacity:1;max-height:300px;" class="Contributes-listItem av-borderColor av-marginLeft"><div class="ContributesItem av-paddingRight" role="link"><a class="ContributesItem-avatar" href="/learncpp"><img class="Avatar-hemingway" src="https://pic2.zhimg.com/v2-bf63794c542fc73b11e17014b7e0d01d_m.jpg" srcset="https://pic2.zhimg.com/v2-bf63794c542fc73b11e17014b7e0d01d_xl.jpg 2x"/></a><div class="ContributesItem-info"><div class="ContributesItem-nameLine"><a class="ContributesItem-name" href="https://zhuanlan.zhihu.com/learncpp">学习C++</a></div><p class="ContributesItem-intro u-ellipsis">写写C++</p></div><a class="ContributesItem-entrance" href="https://zhuanlan.zhihu.com/learncpp">进入专栏</a></div></li></ul></div><div class="PostComment"><div class="BlockTitle av-marginLeft av-borderColor PostComment-blockTitle"><span class="BlockTitle-title">6 条评论</span><span class="BlockTitle-line"></span></div><div class="CommentEditor PostComment-mainEditor"><div class="CommentEditor-input"><div class="CommentEditor-actions"><button class="Button Button--plain" type="button">取消</button><button class="Button Button--blue" disabled="" type="button">评论</button></div></div></div><div class="PostCommentList"></div></div><div class="PostIndex-recommendZone av-card"><div class="BlockTitle av-marginLeft av-borderColor"><span class="BlockTitle-title">推荐阅读</span><span class="BlockTitle-line"></span></div><div class="Spinner"></div></div></div></div></div></div><textarea id="clientConfig" hidden="">{&quot;debug&quot;:false,&quot;apiRoot&quot;:&quot;&quot;,&quot;paySDK&quot;:&quot;https:\u002F\u002Fpay.zhihu.com\u002Fapi\u002Fjs&quot;,&quot;wechatConfigAPI&quot;:&quot;\u002Fapi\u002Fwechat\u002Fjssdkconfig&quot;,&quot;name&quot;:&quot;production&quot;,&quot;instance&quot;:&quot;column&quot;,&quot;tokens&quot;:{&quot;X-XSRF-TOKEN&quot;:null,&quot;X-UDID&quot;:null,&quot;Authorization&quot;:&quot;oauth c3cef7c66a1843f8b3a9e6a1e3160e20&quot;}}</textarea><textarea id="preloadedState" hidden="">{&quot;database&quot;:{&quot;Post&quot;:{&quot;30713476&quot;:{&quot;isPending&quot;:false,&quot;contributes&quot;:[{&quot;sourceColumn&quot;:{&quot;lastUpdated&quot;:1497249764,&quot;description&quot;:&quot;玩玩有趣的东西&quot;,&quot;permission&quot;:&quot;COLUMN_PUBLIC&quot;,&quot;memberId&quot;:10760740,&quot;contributePermission&quot;:&quot;COLUMN_PUBLIC&quot;,&quot;translatedCommentPermission&quot;:&quot;all&quot;,&quot;canManage&quot;:true,&quot;intro&quot;:&quot;写写C++&quot;,&quot;urlToken&quot;:&quot;learncpp&quot;,&quot;id&quot;:25963,&quot;imagePath&quot;:&quot;v2-bf63794c542fc73b11e17014b7e0d01d.jpg&quot;,&quot;slug&quot;:&quot;learncpp&quot;,&quot;applyReason&quot;:&quot;0&quot;,&quot;name&quot;:&quot;学习C++&quot;,&quot;title&quot;:&quot;学习C++&quot;,&quot;url&quot;:&quot;https:\u002F\u002Fzhuanlan.zhihu.com\u002Flearncpp&quot;,&quot;commentPermission&quot;:&quot;COLUMN_ALL_CAN_COMMENT&quot;,&quot;canPost&quot;:true,&quot;created&quot;:1483611626,&quot;state&quot;:&quot;COLUMN_NORMAL&quot;,&quot;followers&quot;:2913,&quot;avatar&quot;:{&quot;id&quot;:&quot;v2-bf63794c542fc73b11e17014b7e0d01d&quot;,&quot;template&quot;:&quot;https:\u002F\u002Fpic2.zhimg.com\u002F{id}_{size}.jpg&quot;},&quot;activateAuthorRequested&quot;:false,&quot;following&quot;:false,&quot;imageUrl&quot;:&quot;https:\u002F\u002Fpic2.zhimg.com\u002Fv2-bf63794c542fc73b11e17014b7e0d01d_l.jpg&quot;,&quot;articlesCount&quot;:53},&quot;state&quot;:&quot;accepted&quot;,&quot;targetPost&quot;:{&quot;titleImage&quot;:&quot;https:\u002F\u002Fpic2.zhimg.com\u002Fv2-b02ba5440139b21ee6a2ceba5158c0ed_r.png&quot;,&quot;lastUpdated&quot;:1510147133,&quot;imagePath&quot;:&quot;v2-b02ba5440139b21ee6a2ceba5158c0ed.png&quot;,&quot;permission&quot;:&quot;ARTICLE_PUBLIC&quot;,&quot;topics&quot;:[183367,13478,25257],&quot;summary&quot;:&quot;介绍链接：\u003Ca href=\&quot;https:\u002F\u002Fwww.codewars.com\u002Fkata\u002F7x7-skyscrapers\u002F\&quot;\u003E7×7 Skyscrapers\u003C\u002Fa\u003EC#答案（原因：懒，但是完全可以转成C++）：\u003Ca href=\&quot;https:\u002F\u002Fgithub.com\u002Fbajdcc\u002Flearnstl\u002Fblob\u002Fmaster\u002Fcodewars\u002F7x7-skyscrapers\u002Fcsharp_solution.cs\&quot;\u003Ebajdcc\u002Flearnstl\u003C\u002Fa\u003E题目（机翻）：在7乘7格的网格中，你只想在每个广场上放置一个摩天大楼，只有一些线索：摩天大楼的高度在1到7之间一行或一列中的所有摩天大楼楼层数量各不相同你只知道…&quot;,&quot;copyPermission&quot;:&quot;ARTICLE_COPYABLE&quot;,&quot;translatedCommentPermission&quot;:&quot;all&quot;,&quot;likes&quot;:0,&quot;origAuthorId&quot;:0,&quot;publishedTime&quot;:&quot;2017-11-03T16:47:12+08:00&quot;,&quot;sourceUrl&quot;:&quot;&quot;,&quot;urlToken&quot;:30713476,&quot;id&quot;:4474077,&quot;withContent&quot;:false,&quot;slug&quot;:30713476,&quot;bigTitleImage&quot;:false,&quot;title&quot;:&quot;【Codewars】7×7 摩天大楼&quot;,&quot;url&quot;:&quot;\u002Fp\u002F30713476&quot;,&quot;commentPermission&quot;:&quot;ARTICLE_ALL_CAN_COMMENT&quot;,&quot;snapshotUrl&quot;:&quot;&quot;,&quot;created&quot;:1509698832,&quot;comments&quot;:0,&quot;columnId&quot;:0,&quot;content&quot;:&quot;&quot;,&quot;parentId&quot;:0,&quot;state&quot;:&quot;ARTICLE_PUBLISHED&quot;,&quot;imageUrl&quot;:&quot;https:\u002F\u002Fpic2.zhimg.com\u002Fv2-b02ba5440139b21ee6a2ceba5158c0ed_r.png&quot;,&quot;author&quot;:{&quot;bio&quot;:&quot;专业研究野生技术&quot;,&quot;isFollowing&quot;:false,&quot;hash&quot;:&quot;7a228f3d98a5d011f952110c10dc4976&quot;,&quot;uid&quot;:71809588264960,&quot;isOrg&quot;:false,&quot;slug&quot;:&quot;bajdcc&quot;,&quot;isFollowed&quot;:false,&quot;description&quot;:&quot;专业研究野生技术 https:\u002F\u002Fgithub.com\u002Fbajdcc&quot;,&quot;name&quot;:&quot;陈安&quot;,&quot;profileUrl&quot;:&quot;https:\u002F\u002Fwww.zhihu.com\u002Fpeople\u002Fbajdcc&quot;,&quot;avatar&quot;:{&quot;id&quot;:&quot;v2-cd6d61ad9ef94c41b9e77f8e0f727893&quot;,&quot;template&quot;:&quot;https:\u002F\u002Fpic4.zhimg.com\u002F50\u002F{id}_{size}.jpg&quot;},&quot;isOrgWhiteList&quot;:false,&quot;isBanned&quot;:false},&quot;memberId&quot;:10760740,&quot;excerptTitle&quot;:&quot;&quot;,&quot;voteType&quot;:&quot;ARTICLE_VOTE_CLEAR&quot;},&quot;id&quot;:903235}],&quot;title&quot;:&quot;【Codewars】7×7 摩天大楼&quot;,&quot;author&quot;:&quot;bajdcc&quot;,&quot;content&quot;:&quot;\u003Ch2\u003E介绍\u003C\u002Fh2\u003E\u003Cp\u003E链接：\u003Ca href=\&quot;http:\u002F\u002Flink.zhihu.com\u002F?target=https%3A\u002F\u002Fwww.codewars.com\u002Fkata\u002F7x7-skyscrapers\u002F\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;\u003E7×7 Skyscrapers\u003Ci class=\&quot;icon-external\&quot;\u003E\u003C\u002Fi\u003E\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003Cp\u003EC#答案（原因：懒，但是完全可以转成C++）：\u003Ca href=\&quot;http:\u002F\u002Flink.zhihu.com\u002F?target=https%3A\u002F\u002Fgithub.com\u002Fbajdcc\u002Flearnstl\u002Fblob\u002Fmaster\u002Fcodewars\u002F7x7-skyscrapers\u002Fcsharp_solution.cs\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;\u003Ebajdcc\u002Flearnstl\u003Ci class=\&quot;icon-external\&quot;\u003E\u003C\u002Fi\u003E\u003C\u002Fa\u003E\u003C\u002Fp\u003E\u003Cp\u003E题目（机翻）：\u003C\u002Fp\u003E\u003Cp\u003E在7乘7格的网格中，你只想在每个广场上放置一个摩天大楼，只有一些线索：\u003C\u002Fp\u003E\u003Cul\u003E\u003Cli\u003E摩天大楼的高度在1到7之间\u003C\u002Fli\u003E\u003Cli\u003E一行或一列中的所有摩天大楼楼层数量各不相同\u003C\u002Fli\u003E\u003Cli\u003E你只知道从外面的一行或一列中看到的摩天大楼的数量\u003C\u002Fli\u003E\u003Cli\u003E高层摩天大楼阻挡了后面的下层摩天大楼，导致你看不到后面的大楼了\u003C\u002Fli\u003E\u003C\u002Ful\u003E\u003Cp\u003E你能写一个能解决这个难题的程序吗？\u003C\u002Fp\u003E\u003Cp\u003E举个例子，6x6的：\u003C\u002Fp\u003E\u003Cfigure\u003E\u003Cnoscript\u003E\u003Cimg src=\&quot;https:\u002F\u002Fpic2.zhimg.com\u002Fv2-a45496bad9d0aadfb3e2361ac5b8ad49_b.jpg\&quot; data-rawwidth=\&quot;292\&quot; data-rawheight=\&quot;296\&quot; class=\&quot;content_image\&quot; width=\&quot;292\&quot;\u003E\u003C\u002Fnoscript\u003E\u003Cimg src=\&quot;data:image\u002Fsvg+xml;utf8,&amp;lt;svg%20xmlns=&#x27;http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg&#x27;%20width=&#x27;292&#x27;%20height=&#x27;296&#x27;&amp;gt;&amp;lt;\u002Fsvg&amp;gt;\&quot; data-rawwidth=\&quot;292\&quot; data-rawheight=\&quot;296\&quot; class=\&quot;content_image lazy\&quot; width=\&quot;292\&quot; data-actualsrc=\&quot;https:\u002F\u002Fpic2.zhimg.com\u002Fv2-a45496bad9d0aadfb3e2361ac5b8ad49_b.jpg\&quot;\u003E\u003Cfigcaption\u003E6x6 摩天大楼 例\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E\u003Cb\u003E（有人说看不懂规则3和4，我就以图来说明一下）\u003C\u002Fb\u003E\u003C\u002Fp\u003E\u003Cp\u003E我根据上图制作了一个假城市（\u003Ca href=\&quot;http:\u002F\u002Flink.zhihu.com\u002F?target=https%3A\u002F\u002Fgithub.com\u002Fbajdcc\u002FUnityTest\&quot; class=\&quot; wrap external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;\u003Ebajdcc\u002FUnityTest\u003Ci class=\&quot;icon-external\&quot;\u003E\u003C\u002Fi\u003E\u003C\u002Fa\u003E），如下：\u003C\u002Fp\u003E\u003Cfigure\u003E\u003Cnoscript\u003E\u003Cimg src=\&quot;https:\u002F\u002Fpic2.zhimg.com\u002Fv2-9a35e16413c8e62d9ec55abd6c0a5d3d_b.jpg\&quot; data-rawwidth=\&quot;739\&quot; data-rawheight=\&quot;614\&quot; class=\&quot;origin_image zh-lightbox-thumb\&quot; width=\&quot;739\&quot; data-original=\&quot;https:\u002F\u002Fpic2.zhimg.com\u002Fv2-9a35e16413c8e62d9ec55abd6c0a5d3d_r.jpg\&quot;\u003E\u003C\u002Fnoscript\u003E\u003Cimg src=\&quot;data:image\u002Fsvg+xml;utf8,&amp;lt;svg%20xmlns=&#x27;http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg&#x27;%20width=&#x27;739&#x27;%20height=&#x27;614&#x27;&amp;gt;&amp;lt;\u002Fsvg&amp;gt;\&quot; data-rawwidth=\&quot;739\&quot; data-rawheight=\&quot;614\&quot; class=\&quot;origin_image zh-lightbox-thumb lazy\&quot; width=\&quot;739\&quot; data-original=\&quot;https:\u002F\u002Fpic2.zhimg.com\u002Fv2-9a35e16413c8e62d9ec55abd6c0a5d3d_r.jpg\&quot; data-actualsrc=\&quot;https:\u002F\u002Fpic2.zhimg.com\u002Fv2-9a35e16413c8e62d9ec55abd6c0a5d3d_b.jpg\&quot;\u003E\u003Cfigcaption\u003E虚拟城市\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E我们看线索中的左侧（3，4，4）：\u003C\u002Fp\u003E\u003Cfigure\u003E\u003Cnoscript\u003E\u003Cimg src=\&quot;https:\u002F\u002Fpic1.zhimg.com\u002Fv2-489542dd990bc52f26c035d8b8b58398_b.jpg\&quot; data-rawwidth=\&quot;674\&quot; data-rawheight=\&quot;520\&quot; class=\&quot;origin_image zh-lightbox-thumb\&quot; width=\&quot;674\&quot; data-original=\&quot;https:\u002F\u002Fpic1.zhimg.com\u002Fv2-489542dd990bc52f26c035d8b8b58398_r.jpg\&quot;\u003E\u003C\u002Fnoscript\u003E\u003Cimg src=\&quot;data:image\u002Fsvg+xml;utf8,&amp;lt;svg%20xmlns=&#x27;http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg&#x27;%20width=&#x27;674&#x27;%20height=&#x27;520&#x27;&amp;gt;&amp;lt;\u002Fsvg&amp;gt;\&quot; data-rawwidth=\&quot;674\&quot; data-rawheight=\&quot;520\&quot; class=\&quot;origin_image zh-lightbox-thumb lazy\&quot; width=\&quot;674\&quot; data-original=\&quot;https:\u002F\u002Fpic1.zhimg.com\u002Fv2-489542dd990bc52f26c035d8b8b58398_r.jpg\&quot; data-actualsrc=\&quot;https:\u002F\u002Fpic1.zhimg.com\u002Fv2-489542dd990bc52f26c035d8b8b58398_b.jpg\&quot;\u003E\u003Cfigcaption\u003E规则3和4的说明\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Ch2\u003E要求\u003C\u002Fh2\u003E\u003Cp\u003E输入：int[]\u003C\u002Fp\u003E\u003Cfigure\u003E\u003Cnoscript\u003E\u003Cimg src=\&quot;https:\u002F\u002Fpic1.zhimg.com\u002Fv2-587af0b069f7696a90049be18391f65c_b.jpg\&quot; data-rawwidth=\&quot;273\&quot; data-rawheight=\&quot;279\&quot; class=\&quot;content_image\&quot; width=\&quot;273\&quot;\u003E\u003C\u002Fnoscript\u003E\u003Cimg src=\&quot;data:image\u002Fsvg+xml;utf8,&amp;lt;svg%20xmlns=&#x27;http:\u002F\u002Fwww.w3.org\u002F2000\u002Fsvg&#x27;%20width=&#x27;273&#x27;%20height=&#x27;279&#x27;&amp;gt;&amp;lt;\u002Fsvg&amp;gt;\&quot; data-rawwidth=\&quot;273\&quot; data-rawheight=\&quot;279\&quot; class=\&quot;content_image lazy\&quot; width=\&quot;273\&quot; data-actualsrc=\&quot;https:\u002F\u002Fpic1.zhimg.com\u002Fv2-587af0b069f7696a90049be18391f65c_b.jpg\&quot;\u003E\u003Cfigcaption\u003E输入的数组下标\u003C\u002Ffigcaption\u003E\u003C\u002Ffigure\u003E\u003Cp\u003E输出：int[][]\u003C\u002Fp\u003E\u003Ch2\u003E分析\u003C\u002Fh2\u003E\u003Cp\u003E花了两天思考这个系列的问题，最终当然是写出来了（光想没用）。\u003C\u002Fp\u003E\u003Cp\u003E这个题目感觉跟数独很像，我最先想的思路就是一步步推理，直到解决问题，然而，4x4大小的推理规则在6x6大小的问题中，可能需要补充一些东西或有些东西不实用了，这就麻烦了。\u003C\u002Fp\u003E\u003Cp\u003E老实说，做数独题的时候，我不怎么用穷举法，我是对当前局面进行推理，利用排除法一步步确定答案，但用代码实现推理就变得困难了，虽然这样做是最优的（因为根据不做多余计算）。\u003Cbr\u003E推理不能用，那就老老实实用穷举法吧，虽然穷举法有点low，但只要能过就行。\u003C\u002Fp\u003E\u003Cp\u003E题目中透露了一些可供优化的信息：\u003Cb\u003E各行各列中数是唯一的\u003C\u002Fb\u003E。这就意味着复杂度从O(n^n)下降到O(n!)。这跟八皇后有点像，但又有所不同，因此我就用回溯法做。\u003C\u002Fp\u003E\u003Ch2\u003E进一步思考\u003C\u002Fh2\u003E\u003Cp\u003E确定用回溯做，也感觉可以借鉴八皇后的思路，还不能马上开工，有几个问题：\u003C\u002Fp\u003E\u003Col\u003E\u003Cli\u003E全排列的生成，这个嘛拿之前的代码粘贴下\u003C\u002Fli\u003E\u003Cli\u003E回溯遍历的顺序，这个顺序大有文章\u003C\u002Fli\u003E\u003C\u002Fol\u003E\u003Cp\u003E先解决全排列问题：抄了下\u003Ca href=\&quot;http:\u002F\u002Flink.zhihu.com\u002F?target=https%3A\u002F\u002Fgithub.com\u002Fbajdcc\u002FjProlog\u002Fblob\u002Fmaster\u002Fsrc\u002Fcom\u002Fbajdcc\u002Frt\u002Fgen\u002Farray\u002FRtNorepArray.java%23L43\&quot; class=\&quot; external\&quot; target=\&quot;_blank\&quot; rel=\&quot;nofollow noreferrer\&quot;\u003E\u003Cspan class=\&quot;invisible\&quot;\u003Ehttps:\u002F\u002F\u003C\u002Fspan\u003E\u003Cspan class=\&quot;visible\&quot;\u003Egithub.com\u002Fbajdcc\u002FjProl\u003C\u002Fspan\u003E\u003Cspan class=\&quot;invisible\&quot;\u003Eog\u002Fblob\u002Fmaster\u002Fsrc\u002Fcom\u002Fbajdcc\u002Frt\u002Fgen\u002Farray\u002FRtNorepArray.java#L43\u003C\u002Fspan\u003E\u003Cspan class=\&quot;ellipsis\&quot;\u003E\u003C\u002Fspan\u003E\u003Ci class=\&quot;icon-external\&quot;\u003E\u003C\u002Fi\u003E\u003C\u002Fa\u003E 哈哈。\u003C\u002Fp\u003E\u003Cp\u003E回溯的顺序应该是怎样呢？自己试喽。\u003C\u002Fp\u003E\u003Cp\u003E先生成全排列，然后计算从左边向右看到的楼层数（假设为Sky函数，Sky:=int-&amp;gt;int），将结果存到字典中。\u003C\u002Fp\u003E\u003Cp\u003E会发现，当n=7时，sky(7)=1，可能性最低，都算出来后，排序。\u003C\u002Fp\u003E\u003Cp\u003Esky(7)&amp;lt;sky(6)&amp;lt;sky(5)&amp;lt;sky(1)&amp;lt;sky(4)&amp;lt;sky(3)&amp;lt;sky(2)\u003C\u002Fp\u003E\u003Cp\u003E展开顺序的话，我肯定先找n=7的情况的，因为这时的不确定性最低（解只有一个），相当于可以确定一个格子的值了。\u003C\u002Fp\u003E\u003Cp\u003E目前的思路是：找到值=7的数，就直接敲定一排解（1~7）；再找值=6的数，这时答案不唯一，回溯；继续找……\u003C\u002Fp\u003E\u003Cp\u003E这样运行程序的话，肯定是耗时很长的，原因是什么？\u003C\u002Fp\u003E\u003Ch2\u003E再想一想\u003C\u002Fh2\u003E\u003Cp\u003E我们优化程序的目标是回溯时尽可以减少回溯次数，那就必须在决定一个展开顺序：先展开不确定性小的，再展开不确定性较大的。\u003C\u002Fp\u003E\u003Cp\u003E有一种情况，可以减少不确定性：如果一排格子的两侧都有数字（都不是零），那其实可以将它们放到一起回溯。例： 5 | x x x x x x x | 2，这样可以极大降低可能性。事实证明这样做有一点效果。\u003C\u002Fp\u003E\u003Cp\u003E思路有了：\u003C\u002Fp\u003E\u003Col\u003E\u003Cli\u003E将规则排好序（数大，对位匹配优先），回溯规则\u003C\u002Fli\u003E\u003Cli\u003E保存现场，查看是否冲突，一是当前的测试值是否与该行\u002F列冲突，二是测试值是否满足各行\u002F列数唯一的原则\u003C\u002Fli\u003E\u003Cli\u003E如果失败，回溯\u003C\u002Fli\u003E\u003Cli\u003E如果成功，level+=1，再测试下一个规则\u003C\u002Fli\u003E\u003Cli\u003E如果level==规则总数，意味着通过了所有规则，\u003Cb\u003E此时还不能确定解是否正确\u003C\u002Fb\u003E\u003C\u002Fli\u003E\u003Cli\u003E规则有覆盖不到的行\u002F列，此时要将值是零的格子进行填空\u003C\u002Fli\u003E\u003Cli\u003E填空的办法是用排除法，然后不断遍历填空，如果最后填空失败，则解不正确，如果填空成功，则解正确\u003C\u002Fli\u003E\u003C\u002Fol\u003E\u003Cp\u003E注意点：\u003C\u002Fp\u003E\u003Col\u003E\u003Cli\u003E坐标系问题，方向问题\u003C\u002Fli\u003E\u003Cli\u003E判断条件是否完备\u003C\u002Fli\u003E\u003Cli\u003E尽量用数组做（用list&amp;lt;&amp;gt;竟然比int[]快。。）\u003C\u002Fli\u003E\u003Cli\u003E等等细节问题\u003C\u002Fli\u003E\u003C\u002Fol\u003E\u003Cp\u003E代码比较啰嗦，460行，不贴了（别人写得都很短简直了）。\u003C\u002Fp\u003E&quot;,&quot;updated&quot;:new Date(&quot;2017-11-03T08:47:12.000Z&quot;),&quot;canComment&quot;:false,&quot;commentPermission&quot;:&quot;anyone&quot;,&quot;commentCount&quot;:6,&quot;collapsedCount&quot;:0,&quot;likeCount&quot;:7,&quot;state&quot;:&quot;published&quot;,&quot;isLiked&quot;:false,&quot;slug&quot;:&quot;30713476&quot;,&quot;isTitleImageFullScreen&quot;:false,&quot;rating&quot;:&quot;none&quot;,&quot;titleImage&quot;:&quot;https:\u002F\u002Fpic2.zhimg.com\u002Fv2-b02ba5440139b21ee6a2ceba5158c0ed_r.png&quot;,&quot;links&quot;:{&quot;comments&quot;:&quot;\u002Fapi\u002Fposts\u002F30713476\u002Fcomments&quot;},&quot;reviewers&quot;:[],&quot;topics&quot;:[{&quot;url&quot;:&quot;https:\u002F\u002Fwww.zhihu.com\u002Ftopic\u002F20091503&quot;,&quot;id&quot;:&quot;20091503&quot;,&quot;name&quot;:&quot;CodeWars&quot;},{&quot;url&quot;:&quot;https:\u002F\u002Fwww.zhihu.com\u002Ftopic\u002F19590712&quot;,&quot;id&quot;:&quot;19590712&quot;,&quot;name&quot;:&quot;C#&quot;},{&quot;url&quot;:&quot;https:\u002F\u002Fwww.zhihu.com\u002Ftopic\u002F19625716&quot;,&quot;id&quot;:&quot;19625716&quot;,&quot;name&quot;:&quot;算法与数据结构&quot;}],&quot;adminClosedComment&quot;:false,&quot;titleImageSize&quot;:{&quot;width&quot;:1280,&quot;height&quot;:720},&quot;href&quot;:&quot;\u002Fapi\u002Fposts\u002F30713476&quot;,&quot;excerptTitle&quot;:&quot;&quot;,&quot;tipjarState&quot;:&quot;inactivated&quot;,&quot;annotationAction&quot;:[],&quot;sourceUrl&quot;:&quot;&quot;,&quot;pageCommentsCount&quot;:6,&quot;hasPublishingDraft&quot;:false,&quot;snapshotUrl&quot;:&quot;&quot;,&quot;publishedTime&quot;:&quot;2017-11-03T16:47:12+08:00&quot;,&quot;url&quot;:&quot;\u002Fp\u002F30713476&quot;,&quot;lastestLikers&quot;:[{&quot;bio&quot;:&quot;程序员&quot;,&quot;isFollowing&quot;:false,&quot;hash&quot;:&quot;193a0cdb78cec84e26fe02468caf13fb&quot;,&quot;uid&quot;:852909853587443700,&quot;isOrg&quot;:false,&quot;slug&quot;:&quot;ooo-87-64&quot;,&quot;isFollowed&quot;:false,&quot;description&quot;:&quot;&quot;,&quot;name&quot;:&quot;OOO&quot;,&quot;profileUrl&quot;:&quot;https:\u002F\u002Fwww.zhihu.com\u002Fpeople\u002Fooo-87-64&quot;,&quot;avatar&quot;:{&quot;id&quot;:&quot;v2-de24a8606a61532400979823923de1cb&quot;,&quot;template&quot;:&quot;https:\u002F\u002Fpic4.zhimg.com\u002F50\u002F{id}_{size}.jpg&quot;},&quot;isOrgWhiteList&quot;:false,&quot;isBanned&quot;:false},{&quot;bio&quot;:&quot;DotA2吧前前前前前吧主，LOL吧前前前吧主&quot;,&quot;isFollowing&quot;:false,&quot;hash&quot;:&quot;8b780b1e86dd0ccf7f48c90edb97436c&quot;,&quot;uid&quot;:77115282161664,&quot;isOrg&quot;:false,&quot;slug&quot;:&quot;ma-jin-rui-67&quot;,&quot;isFollowed&quot;:false,&quot;description&quot;:&quot;&quot;,&quot;name&quot;:&quot;初级勇者&quot;,&quot;profileUrl&quot;:&quot;https:\u002F\u002Fwww.zhihu.com\u002Fpeople\u002Fma-jin-rui-67&quot;,&quot;avatar&quot;:{&quot;id&quot;:&quot;v2-144cc3a74544b69f22d0505572813c28&quot;,&quot;template&quot;:&quot;https:\u002F\u002Fpic1.zhimg.com\u002F50\u002F{id}_{size}.jpg&quot;},&quot;isOrgWhiteList&quot;:false,&quot;isBanned&quot;:false},{&quot;bio&quot;:&quot;软件初学者&quot;,&quot;isFollowing&quot;:false,&quot;hash&quot;:&quot;316f47c4d717ce2185001b9952a54685&quot;,&quot;uid&quot;:637630717140537300,&quot;isOrg&quot;:false,&quot;slug&quot;:&quot;xiang-gang-hua-10&quot;,&quot;isFollowed&quot;:false,&quot;description&quot;:&quot;我还能指望那些贱人做些什么呢?&quot;,&quot;name&quot;:&quot;项港华&quot;,&quot;profileUrl&quot;:&quot;https:\u002F\u002Fwww.zhihu.com\u002Fpeople\u002Fxiang-gang-hua-10&quot;,&quot;avatar&quot;:{&quot;id&quot;:&quot;eebc698c31658989a96d7d8e77482a14&quot;,&quot;template&quot;:&quot;https:\u002F\u002Fpic1.zhimg.com\u002F50\u002F{id}_{size}.jpg&quot;},&quot;isOrgWhiteList&quot;:false,&quot;isBanned&quot;:false},{&quot;bio&quot;:&quot;算法竞赛爱好者，没事写文字的工科生&quot;,&quot;isFollowing&quot;:false,&quot;hash&quot;:&quot;de1824e649b6142f99cb8393c42e555f&quot;,&quot;uid&quot;:569988173673971700,&quot;isOrg&quot;:false,&quot;slug&quot;:&quot;prime21&quot;,&quot;isFollowed&quot;:false,&quot;description&quot;:&quot;&quot;,&quot;name&quot;:&quot;彭毛小民&quot;,&quot;profileUrl&quot;:&quot;https:\u002F\u002Fwww.zhihu.com\u002Fpeople\u002Fprime21&quot;,&quot;avatar&quot;:{&quot;id&quot;:&quot;a25f5f40390aef05eb0c88344e69741e&quot;,&quot;template&quot;:&quot;https:\u002F\u002Fpic3.zhimg.com\u002F50\u002F{id}_{size}.jpg&quot;},&quot;isOrgWhiteList&quot;:false,&quot;isBanned&quot;:false},{&quot;bio&quot;:&quot;沉迷lightning无法自拔,想去读博士&quot;,&quot;isFollowing&quot;:false,&quot;hash&quot;:&quot;c5a0f3636fbf819a2fa36e3347bf01d7&quot;,&quot;uid&quot;:645320171879796700,&quot;isOrg&quot;:false,&quot;slug&quot;:&quot;wang-ze-lin-47&quot;,&quot;isFollowed&quot;:false,&quot;description&quot;:&quot;并不会写代码的国内5流盲音和德国骨科工程师&quot;,&quot;name&quot;:&quot;林官人&quot;,&quot;profileUrl&quot;:&quot;https:\u002F\u002Fwww.zhihu.com\u002Fpeople\u002Fwang-ze-lin-47&quot;,&quot;avatar&quot;:{&quot;id&quot;:&quot;v2-07fd795407226ea53680678a00eaee15&quot;,&quot;template&quot;:&quot;https:\u002F\u002Fpic2.zhimg.com\u002F50\u002F{id}_{size}.jpg&quot;},&quot;isOrgWhiteList&quot;:false,&quot;isBanned&quot;:false}],&quot;summary&quot;:&quot;\u003Cimg src=\&quot;https:\u002F\u002Fpic2.zhimg.com\u002F50\u002Fv2-a45496bad9d0aadfb3e2361ac5b8ad49_200x112.jpg\&quot; data-caption=\&quot;6x6 摩天大楼 例\&quot; data-rawwidth=\&quot;292\&quot; data-rawheight=\&quot;296\&quot; class=\&quot;origin_image inline-img zh-lightbox-thumb\&quot; data-original=\&quot;https:\u002F\u002Fpic2.zhimg.com\u002F50\u002Fv2-a45496bad9d0aadfb3e2361ac5b8ad49_r.jpg\&quot;\u003E介绍链接：\u003Ca href=\&quot;https:\u002F\u002Fwww.codewars.com\u002Fkata\u002F7x7-skyscrapers\u002F\&quot;\u003E7×7 Skyscrapers\u003C\u002Fa\u003EC#答案（原因：懒，但是完全可以转成C++）：\u003Ca href=\&quot;https:\u002F\u002Fgithub.com\u002Fbajdcc\u002Flearnstl\u002Fblob\u002Fmaster\u002Fcodewars\u002F7x7-skyscrapers\u002Fcsharp_solution.cs\&quot;\u003Ebajdcc\u002Flearnstl\u003C\u002Fa\u003E题目（机翻）：在7乘7格的网格中，你只想在每个广场上放置一个摩天大楼，只有一些线索：摩天大楼的高度在1到7之间一行或一列中的所有摩天大楼楼层数量各不相同你只知道…&quot;,&quot;reviewingCommentsCount&quot;:0,&quot;meta&quot;:{&quot;previous&quot;:null,&quot;next&quot;:null},&quot;annotationDetail&quot;:null,&quot;commentsCount&quot;:6,&quot;likesCount&quot;:7,&quot;FULLINFO&quot;:true}},&quot;User&quot;:{&quot;bajdcc&quot;:{&quot;isFollowed&quot;:false,&quot;name&quot;:&quot;陈安&quot;,&quot;headline&quot;:&quot;专业研究野生技术 https:\u002F\u002Fgithub.com\u002Fbajdcc&quot;,&quot;avatarUrl&quot;:&quot;https:\u002F\u002Fpic4.zhimg.com\u002F50\u002Fv2-cd6d61ad9ef94c41b9e77f8e0f727893_s.jpg&quot;,&quot;isFollowing&quot;:false,&quot;type&quot;:&quot;people&quot;,&quot;slug&quot;:&quot;bajdcc&quot;,&quot;bio&quot;:&quot;专业研究野生技术&quot;,&quot;hash&quot;:&quot;7a228f3d98a5d011f952110c10dc4976&quot;,&quot;uid&quot;:71809588264960,&quot;isOrg&quot;:false,&quot;description&quot;:&quot;专业研究野生技术 https:\u002F\u002Fgithub.com\u002Fbajdcc&quot;,&quot;badge&quot;:{&quot;identity&quot;:null,&quot;bestAnswerer&quot;:null},&quot;profileUrl&quot;:&quot;https:\u002F\u002Fwww.zhihu.com\u002Fpeople\u002Fbajdcc&quot;,&quot;avatar&quot;:{&quot;id&quot;:&quot;v2-cd6d61ad9ef94c41b9e77f8e0f727893&quot;,&quot;template&quot;:&quot;https:\u002F\u002Fpic4.zhimg.com\u002F50\u002F{id}_{size}.jpg&quot;},&quot;isOrgWhiteList&quot;:false,&quot;isBanned&quot;:false}},&quot;Comment&quot;:{},&quot;favlists&quot;:{}},&quot;me&quot;:{},&quot;global&quot;:{&quot;experimentFeatures&quot;:{&quot;ge3&quot;:&quot;ge3_9&quot;,&quot;ge2&quot;:&quot;ge2_1&quot;,&quot;nwebStickySidebar&quot;:&quot;sticky&quot;,&quot;androidPassThroughPush&quot;:&quot;all&quot;,&quot;newMore&quot;:&quot;new&quot;,&quot;nwebFeedAd&quot;:&quot;experiment&quot;,&quot;newSign&quot;:&quot;newVersion&quot;,&quot;liveReviewBuyBar&quot;:&quot;live_review_buy_bar_2&quot;,&quot;qawebRelatedReadingsContentControl&quot;:&quot;open&quot;,&quot;liveStore&quot;:&quot;ls_a2_b2_c1_f2&quot;,&quot;qawebThumbnailAbtest&quot;:&quot;new&quot;,&quot;searchHybridTabs&quot;:&quot;without-tabs&quot;,&quot;enableVoteDownReasonMenu&quot;:&quot;disable&quot;,&quot;iOSEnableFeedModuleWWANAritclePreRender&quot;:&quot;iOS_FeedModule_WWAN_PreRender_Enable&quot;,&quot;isOffice&quot;:&quot;false&quot;,&quot;enableTtsPlay&quot;:&quot;false&quot;,&quot;liveDetailWechatBanner&quot;:&quot;Live_detail_wechat_banner_1&quot;,&quot;wechatShareModal&quot;:&quot;wechat_share_modal_show&quot;,&quot;newLiveFeedMediacard&quot;:&quot;old&quot;,&quot;homeUi2&quot;:&quot;default&quot;,&quot;showVideoUploadAttention&quot;:&quot;true&quot;,&quot;recommendationAbtest&quot;:&quot;new&quot;,&quot;marketTab&quot;:&quot;market_tab_old&quot;,&quot;qrcodeLogin&quot;:&quot;qrcode&quot;,&quot;isShowUnicomFreeEntry&quot;:&quot;unicom_free_entry_off&quot;,&quot;newMobileColumnAppheader&quot;:&quot;new_header&quot;,&quot;androidDbCommentWithRepinRecord&quot;:&quot;open&quot;,&quot;androidDbRecommendAction&quot;:&quot;open&quot;,&quot;zcmLighting&quot;:&quot;zcm&quot;,&quot;favAct&quot;:&quot;default&quot;,&quot;appStoreRateDialog&quot;:&quot;close&quot;,&quot;mobileQaPageProxyHeifetz&quot;:&quot;m_qa_page_nweb&quot;,&quot;newAppViewRelatedAd&quot;:&quot;yes&quot;,&quot;default&quot;:&quot;None&quot;,&quot;isNewNotiPanel&quot;:&quot;yes&quot;,&quot;androidDbRepinSelection&quot;:&quot;open&quot;,&quot;nwebRelatedAdvert&quot;:&quot;default&quot;,&quot;qaStickySidebar&quot;:&quot;sticky_sidebar&quot;,&quot;androidProfilePanel&quot;:&quot;panel_b&quot;,&quot;nwebWriteAnswer&quot;:&quot;experiment&quot;}},&quot;columns&quot;:{&quot;next&quot;:{}},&quot;columnPosts&quot;:{},&quot;columnSettings&quot;:{&quot;colomnAuthor&quot;:[],&quot;uploadAvatarDetails&quot;:&quot;&quot;,&quot;contributeRequests&quot;:[],&quot;contributeRequestsTotalCount&quot;:0,&quot;inviteAuthor&quot;:&quot;&quot;},&quot;postComments&quot;:{},&quot;postReviewComments&quot;:{&quot;comments&quot;:[],&quot;newComments&quot;:[],&quot;hasMore&quot;:true},&quot;favlistsByUser&quot;:{},&quot;favlistRelations&quot;:{},&quot;promotions&quot;:{},&quot;switches&quot;:{&quot;couldSetPoster&quot;:false},&quot;draft&quot;:{&quot;titleImage&quot;:&quot;&quot;,&quot;titleImageSize&quot;:{},&quot;isTitleImageFullScreen&quot;:false,&quot;canTitleImageFullScreen&quot;:false,&quot;title&quot;:&quot;&quot;,&quot;titleImageUploading&quot;:false,&quot;error&quot;:&quot;&quot;,&quot;content&quot;:&quot;&quot;,&quot;draftLoading&quot;:false,&quot;globalLoading&quot;:false,&quot;pendingVideo&quot;:{&quot;resource&quot;:null,&quot;error&quot;:null}},&quot;drafts&quot;:{&quot;draftsList&quot;:[],&quot;next&quot;:{}},&quot;config&quot;:{&quot;userNotBindPhoneTipString&quot;:{}},&quot;recommendPosts&quot;:{&quot;articleRecommendations&quot;:[],&quot;columnRecommendations&quot;:[]},&quot;env&quot;:{&quot;edition&quot;:{&quot;baidu&quot;:false,&quot;yidianzixun&quot;:false,&quot;qqnews&quot;:false},&quot;isAppView&quot;:false,&quot;appViewConfig&quot;:{&quot;content_padding_top&quot;:128,&quot;content_padding_bottom&quot;:56,&quot;content_padding_left&quot;:16,&quot;content_padding_right&quot;:16,&quot;title_font_size&quot;:22,&quot;body_font_size&quot;:16,&quot;is_dark_theme&quot;:false,&quot;can_auto_load_image&quot;:true,&quot;app_info&quot;:&quot;OS=iOS&quot;},&quot;isApp&quot;:false,&quot;userAgent&quot;:{&quot;ua&quot;:&quot;Wget\u002F1.19.1 (cygwin)&quot;,&quot;browser&quot;:{},&quot;engine&quot;:{},&quot;os&quot;:{},&quot;device&quot;:{},&quot;cpu&quot;:{}}},&quot;message&quot;:{&quot;newCount&quot;:0},&quot;pushNotification&quot;:{&quot;newCount&quot;:0}}</textarea><script src="//static.zhihu.com/hemingway/common.95b19b48d0d6b20aae46.js"></script><script src="//static.zhihu.com/hemingway/app.40eeaeeef4c006d528d0.js"></script><script src="//static.zhihu.com/hemingway/raven.bdd8772ab8ba1205b8ea.js" async="" defer=""></script></body></html>